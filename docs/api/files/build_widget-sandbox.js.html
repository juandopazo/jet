<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Jet</title>
    <link rel="stylesheet" href="http://yui.yahooapis.com/3.4.0/build/cssgrids/cssgrids-min.css">
    <link rel="stylesheet" href="../assets/vendor/prettify/prettify-min.css">
    <link rel="stylesheet" href="../assets/css/main.css" id="site_styles">
    <script src="http://yui.yahooapis.com/3.4.0/build/yui/yui-min.js"></script>
</head>
<body class="yui3-skin-sam">

<div id="doc">
    <div id="hd" class="yui3-g header">
        <div class="yui3-u-3-4">
            <h1><a href="../index.html"><img src="../assets/css/logo.png">Jet</a></h1>
        </div>
        <div class="yui3-u-1-4 version">
            <em>API Docs for: 0.1.2</em>
        </div>
    </div>
    <div class="yui3-g">

        <div id="sidebar" class="yui3-u">
            <div id="modules" class="sidebox">
    <div class="hd">
        <h2 class="no-toc">Modules</h2>
    </div>
    <div class="bd">
        <ul>
            
                <li><a href="../modules/anim.html">anim</a>
                
                    <ul>
                        
                    </ul>
                
                </li>
            
                <li><a href="../modules/appview.html">appview</a>
                
                    <ul>
                        
                    </ul>
                
                </li>
            
                <li><a href="../modules/array-extras.html">array-extras</a>
                
                    <ul>
                        
                    </ul>
                
                </li>
            
                <li><a href="../modules/base.html">base</a>
                
                    <ul>
                        
                    </ul>
                
                </li>
            
                <li><a href="../modules/button.html">button</a>
                
                    <ul>
                        
                    </ul>
                
                </li>
            
                <li><a href="../modules/container.html">container</a>
                
                    <ul>
                        
                    </ul>
                
                </li>
            
                <li><a href="../modules/cookie.html">cookie</a>
                
                    <ul>
                        
                    </ul>
                
                </li>
            
                <li><a href="../modules/datasource.html">datasource</a>
                
                    <ul>
                        
                    </ul>
                
                </li>
            
                <li><a href="../modules/datatable.html">datatable</a>
                
                    <ul>
                        
                    </ul>
                
                </li>
            
                <li><a href="../modules/deferred.html">deferred</a>
                
                    <ul>
                        
                    </ul>
                
                </li>
            
                <li><a href="../modules/dragdrop.html">dragdrop</a>
                
                    <ul>
                        
                    </ul>
                
                </li>
            
                <li><a href="../modules/escape.html">escape</a>
                
                    <ul>
                        
                    </ul>
                
                </li>
            
                <li><a href="../modules/form.html">form</a>
                
                    <ul>
                        
                    </ul>
                
                </li>
            
                <li><a href="../modules/history.html">history</a>
                
                    <ul>
                        
                    </ul>
                
                </li>
            
                <li><a href="../modules/imageloader.html">imageloader</a>
                
                    <ul>
                        
                    </ul>
                
                </li>
            
                <li><a href="../modules/io.html">io</a>
                
                    <ul>
                        
                    </ul>
                
                </li>
            
                <li><a href="../modules/io-xdr.html">io-xdr</a>
                
                    <ul>
                        
                    </ul>
                
                </li>
            
                <li><a href="../modules/json.html">json</a>
                
                    <ul>
                        
                    </ul>
                
                </li>
            
                <li><a href="../modules/layout.html">layout</a>
                
                    <ul>
                        
                    </ul>
                
                </li>
            
                <li><a href="../modules/log.html">log</a>
                
                    <ul>
                        
                    </ul>
                
                </li>
            
                <li><a href="../modules/menu.html">menu</a>
                
                    <ul>
                        
                    </ul>
                
                </li>
            
                <li><a href="../modules/node.html">node</a>
                
                    <ul>
                        
                    </ul>
                
                </li>
            
                <li><a href="../modules/node-deferred.html">node-deferred</a>
                
                    <ul>
                        
                    </ul>
                
                </li>
            
                <li><a href="../modules/oop.html">oop</a>
                
                    <ul>
                        
                    </ul>
                
                </li>
            
                <li><a href="../modules/paginator.html">paginator</a>
                
                    <ul>
                        
                    </ul>
                
                </li>
            
                <li><a href="../modules/progressbar.html">progressbar</a>
                
                    <ul>
                        
                    </ul>
                
                </li>
            
                <li><a href="../modules/resize.html">resize</a>
                
                    <ul>
                        
                    </ul>
                
                </li>
            
                <li><a href="../modules/selector.html">selector</a>
                
                    <ul>
                        
                    </ul>
                
                </li>
            
                <li><a href="../modules/sizzle.html">sizzle</a>
                
                    <ul>
                        
                    </ul>
                
                </li>
            
                <li><a href="../modules/swf.html">swf</a>
                
                    <ul>
                        
                    </ul>
                
                </li>
            
                <li><a href="../modules/tabview.html">tabview</a>
                
                    <ul>
                        
                    </ul>
                
                </li>
            
                <li><a href="../modules/touch.html">touch</a>
                
                    <ul>
                        
                    </ul>
                
                </li>
            
                <li><a href="../modules/transition.html">transition</a>
                
                    <ul>
                        
                    </ul>
                
                </li>
            
                <li><a href="../modules/treeview.html">treeview</a>
                
                    <ul>
                        
                    </ul>
                
                </li>
            
                <li><a href="../modules/vector.html">vector</a>
                
                    <ul>
                        
                    </ul>
                
                </li>
            
                <li><a href="../modules/widget-alignment.html">widget-alignment</a>
                
                    <ul>
                        
                    </ul>
                
                </li>
            
                <li><a href="../modules/widget-parentchild.html">widget-parentchild</a>
                
                    <ul>
                        
                    </ul>
                
                </li>
            
                <li><a href="../modules/widget-sandbox.html">widget-sandbox</a>
                
                    <ul>
                        
                    </ul>
                
                </li>
            
                <li><a href="../modules/widget-stack.html">widget-stack</a>
                
                    <ul>
                        
                    </ul>
                
                </li>
            
        </ul>
    </div>
</div>

<div id="classes" class="sidebox">
    <div class="hd">
        <h2 class="no-toc">Classes</h2>
    </div>
    <div class="bd">
        <ul>
            
                <li><a href="../classes/AppView.html">AppView</a></li>
            
                <li><a href="../classes/Array.html">Array</a></li>
            
                <li><a href="../classes/ArrayList.html">ArrayList</a></li>
            
                <li><a href="../classes/Attribute.html">Attribute</a></li>
            
                <li><a href="../classes/Base.html">Base</a></li>
            
                <li><a href="../classes/BuiltClass.html">BuiltClass</a></li>
            
                <li><a href="../classes/Button.html">Button</a></li>
            
                <li><a href="../classes/ButtonGroup.html">ButtonGroup</a></li>
            
                <li><a href="../classes/Cell.html">Cell</a></li>
            
                <li><a href="../classes/CheckBox.html">CheckBox</a></li>
            
                <li><a href="../classes/Class.html">Class</a></li>
            
                <li><a href="../classes/Column.html">Column</a></li>
            
                <li><a href="../classes/ComboBox.html">ComboBox</a></li>
            
                <li><a href="../classes/ComboOption.html">ComboOption</a></li>
            
                <li><a href="../classes/Cookie.html">Cookie</a></li>
            
                <li><a href="../classes/Core.html">Core</a></li>
            
                <li><a href="../classes/DataSource.html">DataSource</a></li>
            
                <li><a href="../classes/DataSource.Ajax.html">DataSource.Ajax</a></li>
            
                <li><a href="../classes/DataSource.Get.html">DataSource.Get</a></li>
            
                <li><a href="../classes/DataSource.Local.html">DataSource.Local</a></li>
            
                <li><a href="../classes/DataSource.XDR.html">DataSource.XDR</a></li>
            
                <li><a href="../classes/DataTable.html">DataTable</a></li>
            
                <li><a href="../classes/Deferred.html">Deferred</a></li>
            
                <li><a href="../classes/DOM.html">DOM</a></li>
            
                <li><a href="../classes/DOMEventHandler.html">DOMEventHandler</a></li>
            
                <li><a href="../classes/Drag.html">Drag</a></li>
            
                <li><a href="../classes/DragDrop.html">DragDrop</a></li>
            
                <li><a href="../classes/Easing.html">Easing</a></li>
            
                <li><a href="../classes/Escape.html">Escape</a></li>
            
                <li><a href="../classes/Event.Cache.html">Event.Cache</a></li>
            
                <li><a href="../classes/EventFacade.html">EventFacade</a></li>
            
                <li><a href="../classes/EventTarget.html">EventTarget</a></li>
            
                <li><a href="../classes/FanLoader.html">FanLoader</a></li>
            
                <li><a href="../classes/FieldSet.html">FieldSet</a></li>
            
                <li><a href="../classes/Form.html">Form</a></li>
            
                <li><a href="../classes/FormField.html">FormField</a></li>
            
                <li><a href="../classes/Frame.html">Frame</a></li>
            
                <li><a href="../classes/Get.html">Get</a></li>
            
                <li><a href="../classes/History.html">History</a></li>
            
                <li><a href="../classes/Image.html">Image</a></li>
            
                <li><a href="../classes/ImageLoader.html">ImageLoader</a></li>
            
                <li><a href="../classes/IO.html">IO</a></li>
            
                <li><a href="../classes/jet.html">jet</a></li>
            
                <li><a href="../classes/jet~deferred.html">jet~deferred</a></li>
            
                <li><a href="../classes/JSON.html">JSON</a></li>
            
                <li><a href="../classes/Lang.html">Lang</a></li>
            
                <li><a href="../classes/Layout.html">Layout</a></li>
            
                <li><a href="../classes/LayoutPanel.html">LayoutPanel</a></li>
            
                <li><a href="../classes/LayoutPanelBase.html">LayoutPanelBase</a></li>
            
                <li><a href="../classes/Log.html">Log</a></li>
            
                <li><a href="../classes/Module.html">Module</a></li>
            
                <li><a href="../classes/Mouse.html">Mouse</a></li>
            
                <li><a href="../classes/NodeList.html">NodeList</a></li>
            
                <li><a href="../classes/Object.html">Object</a></li>
            
                <li><a href="../classes/Overlay.html">Overlay</a></li>
            
                <li><a href="../classes/Page.html">Page</a></li>
            
                <li><a href="../classes/Paginator.html">Paginator</a></li>
            
                <li><a href="../classes/Panel.html">Panel</a></li>
            
                <li><a href="../classes/PanelBase.html">PanelBase</a></li>
            
                <li><a href="../classes/ProgressBar.html">ProgressBar</a></li>
            
                <li><a href="../classes/RadioButton.html">RadioButton</a></li>
            
                <li><a href="../classes/RadioGroup.html">RadioGroup</a></li>
            
                <li><a href="../classes/Record.html">Record</a></li>
            
                <li><a href="../classes/RecordSet.html">RecordSet</a></li>
            
                <li><a href="../classes/Resize.html">Resize</a></li>
            
                <li><a href="../classes/Sandbox.html">Sandbox</a></li>
            
                <li><a href="../classes/Scrollable.html">Scrollable</a></li>
            
                <li><a href="../classes/SimpleDialog.html">SimpleDialog</a></li>
            
                <li><a href="../classes/StaticPanel.html">StaticPanel</a></li>
            
                <li><a href="../classes/SWF.html">SWF</a></li>
            
                <li><a href="../classes/Tab.html">Tab</a></li>
            
                <li><a href="../classes/TabView.html">TabView</a></li>
            
                <li><a href="../classes/TimeFrame.html">TimeFrame</a></li>
            
                <li><a href="../classes/ToggleButton.html">ToggleButton</a></li>
            
                <li><a href="../classes/Tooltip.html">Tooltip</a></li>
            
                <li><a href="../classes/TreeNode.html">TreeNode</a></li>
            
                <li><a href="../classes/TreeView.html">TreeView</a></li>
            
                <li><a href="../classes/Tween.html">Tween</a></li>
            
                <li><a href="../classes/UA.html">UA</a></li>
            
                <li><a href="../classes/Utility.html">Utility</a></li>
            
                <li><a href="../classes/Vector.html">Vector</a></li>
            
                <li><a href="../classes/Vector.Circle.html">Vector.Circle</a></li>
            
                <li><a href="../classes/Vector.Ellipse.html">Vector.Ellipse</a></li>
            
                <li><a href="../classes/Vector.Image.html">Vector.Image</a></li>
            
                <li><a href="../classes/Vector.Line.html">Vector.Line</a></li>
            
                <li><a href="../classes/Vector.Path.html">Vector.Path</a></li>
            
                <li><a href="../classes/Vector.Rectangle.html">Vector.Rectangle</a></li>
            
                <li><a href="../classes/Vector.RoundedRectangle.html">Vector.RoundedRectangle</a></li>
            
                <li><a href="../classes/Vector.Text.html">Vector.Text</a></li>
            
                <li><a href="../classes/VectorView.html">VectorView</a></li>
            
                <li><a href="../classes/Widget.html">Widget</a></li>
            
                <li><a href="../classes/WidgetAlignment.html">WidgetAlignment</a></li>
            
                <li><a href="../classes/WidgetChild.html">WidgetChild</a></li>
            
                <li><a href="../classes/WidgetParent.html">WidgetParent</a></li>
            
                <li><a href="../classes/WidgetStack.html">WidgetStack</a></li>
            
        </ul>
    </div>
</div>










<div id="fileTree" class="sidebox">
    <div class="hd">
        <h2 class="no-toc">Files</h2>
    </div>
    <div class="bd">
        <ul><li>build/<ul><li><a href="../files/build_anim.js.html">anim.js</a></li><li><a href="../files/build_anim.min.js.html">anim.min.js</a></li><li><a href="../files/build_appview.js.html">appview.js</a></li><li><a href="../files/build_appview.min.js.html">appview.min.js</a></li><li><a href="../files/build_array-extras.js.html">array-extras.js</a></li><li><a href="../files/build_array-extras.min.js.html">array-extras.min.js</a></li><li><a href="../files/build_base.js.html">base.js</a></li><li><a href="../files/build_base.min.js.html">base.min.js</a></li><li><a href="../files/build_button.js.html">button.js</a></li><li><a href="../files/build_button.min.js.html">button.min.js</a></li><li><a href="../files/build_container.js.html">container.js</a></li><li><a href="../files/build_container.min.js.html">container.min.js</a></li><li><a href="../files/build_cookie.js.html">cookie.js</a></li><li><a href="../files/build_cookie.min.js.html">cookie.min.js</a></li><li><a href="../files/build_datasource.js.html">datasource.js</a></li><li><a href="../files/build_datasource.min.js.html">datasource.min.js</a></li><li><a href="../files/build_datatable.js.html">datatable.js</a></li><li><a href="../files/build_datatable.min.js.html">datatable.min.js</a></li><li><a href="../files/build_deferred.js.html">deferred.js</a></li><li><a href="../files/build_deferred.min.js.html">deferred.min.js</a></li><li><a href="../files/build_dragdrop.js.html">dragdrop.js</a></li><li><a href="../files/build_dragdrop.min.js.html">dragdrop.min.js</a></li><li><a href="../files/build_escape.js.html">escape.js</a></li><li><a href="../files/build_escape.min.js.html">escape.min.js</a></li><li><a href="../files/build_form.js.html">form.js</a></li><li><a href="../files/build_form.min.js.html">form.min.js</a></li><li><a href="../files/build_history.js.html">history.js</a></li><li><a href="../files/build_history.min.js.html">history.min.js</a></li><li><a href="../files/build_imageloader.js.html">imageloader.js</a></li><li><a href="../files/build_imageloader.min.js.html">imageloader.min.js</a></li><li><a href="../files/build_io-xdr.js.html">io-xdr.js</a></li><li><a href="../files/build_io-xdr.min.js.html">io-xdr.min.js</a></li><li><a href="../files/build_io.js.html">io.js</a></li><li><a href="../files/build_io.min.js.html">io.min.js</a></li><li><a href="../files/build_jet.js.html">jet.js</a></li><li><a href="../files/build_jet.min.js.html">jet.min.js</a></li><li><a href="../files/build_json.js.html">json.js</a></li><li><a href="../files/build_json.min.js.html">json.min.js</a></li><li><a href="../files/build_layout.js.html">layout.js</a></li><li><a href="../files/build_layout.min.js.html">layout.min.js</a></li><li><a href="../files/build_log.js.html">log.js</a></li><li><a href="../files/build_log.min.js.html">log.min.js</a></li><li><a href="../files/build_menu.js.html">menu.js</a></li><li><a href="../files/build_menu.min.js.html">menu.min.js</a></li><li><a href="../files/build_node-deferred.js.html">node-deferred.js</a></li><li><a href="../files/build_node-deferred.min.js.html">node-deferred.min.js</a></li><li><a href="../files/build_oop.js.html">oop.js</a></li><li><a href="../files/build_oop.min.js.html">oop.min.js</a></li><li><a href="../files/build_paginator.js.html">paginator.js</a></li><li><a href="../files/build_paginator.min.js.html">paginator.min.js</a></li><li><a href="../files/build_progressbar.js.html">progressbar.js</a></li><li><a href="../files/build_progressbar.min.js.html">progressbar.min.js</a></li><li><a href="../files/build_resize.js.html">resize.js</a></li><li><a href="../files/build_resize.min.js.html">resize.min.js</a></li><li><a href="../files/build_selector.js.html">selector.js</a></li><li><a href="../files/build_selector.min.js.html">selector.min.js</a></li><li><a href="../files/build_sizzle.js.html">sizzle.js</a></li><li><a href="../files/build_sizzle.min.js.html">sizzle.min.js</a></li><li><a href="../files/build_swf.js.html">swf.js</a></li><li><a href="../files/build_swf.min.js.html">swf.min.js</a></li><li><a href="../files/build_tabview.js.html">tabview.js</a></li><li><a href="../files/build_tabview.min.js.html">tabview.min.js</a></li><li><a href="../files/build_touch.js.html">touch.js</a></li><li><a href="../files/build_touch.min.js.html">touch.min.js</a></li><li><a href="../files/build_transition.js.html">transition.js</a></li><li><a href="../files/build_transition.min.js.html">transition.min.js</a></li><li><a href="../files/build_treeview.js.html">treeview.js</a></li><li><a href="../files/build_treeview.min.js.html">treeview.min.js</a></li><li><a href="../files/build_vector.js.html">vector.js</a></li><li><a href="../files/build_vector.min.js.html">vector.min.js</a></li><li><a href="../files/build_widget-alignment.js.html">widget-alignment.js</a></li><li><a href="../files/build_widget-alignment.min.js.html">widget-alignment.min.js</a></li><li><a href="../files/build_widget-parentchild.js.html">widget-parentchild.js</a></li><li><a href="../files/build_widget-parentchild.min.js.html">widget-parentchild.min.js</a></li><li><a href="../files/build_widget-sandbox.js.html">widget-sandbox.js</a></li><li><a href="../files/build_widget-sandbox.min.js.html">widget-sandbox.min.js</a></li><li><a href="../files/build_widget-stack.js.html">widget-stack.js</a></li><li><a href="../files/build_widget-stack.min.js.html">widget-stack.min.js</a></li></ul></li></ul>
    </div>
</div>



        </div>

        <div id="main" class="yui3-u">
            <div class="content"><h4>build/widget-sandbox.js</h4>

<pre class="code prettyprint linenums">
/**
 * Provides an extension that sandboxes a widget by moving its contentBox into a frame
 * @module widget-sandbox
 * @requires base
 * 
 * Copyright (c) 2011, Juan Ignacio Dopazo. All rights reserved.
 * Code licensed under the BSD License
 * https://github.com/juandopazo/jet/blob/master/LICENSE.md
*/
jet.add('widget-sandbox', function ($) {

			
var A = $.Array,
	Hash = $.Hash;

var substitute = function (str, o) {
	Hash.each(o, function (prop, val) {
		str = str.replace(new RegExp('{' + prop + '}', 'g'), val);
	});
	return str;
};

/**
 * Creates a wrapper around an iframe. It loads the content either from a local
 * file or from script and creates a local YUI instance bound to that new window and document.
 * @class Frame
 * @extends Base
 * @constructor
 */

var Frame = $.Frame = $.Base.create('frame', $.Base, [], {
	
	/**
	* @static
	* @property DEFAULT_CSS
	* @description The default css used when creating the document.
	* @type String
	*/
	DEFAULT_CSS: 'body { margin: 0; padding: 0; border: none; }',
	/**
	* @static
	* @property HTML
	* @description The template string used to create the iframe
	* @type String
	*/
	HTML: '&lt;iframe border="0" frameBorder="0" marginWidth="0" marginHeight="0" leftMargin="0" topMargin="0" width="100%" height="100%"&gt;&lt;/iframe&gt;',
	/**
	* @static
	* @property PAGE_HTML
	* @description The template used to create the page when created dynamicall$.
	* @type String
	*/
	PAGE_HTML: '&lt;html dir="{DIR}" lang="{LANG}"&gt;&lt;head&gt;&lt;title&gt;{TITLE}&lt;/title&gt;{META}{LINKED_CSS}&lt;style id="editor_css"&gt;{DEFAULT_CSS}&lt;/style&gt;{EXTRA_CSS}&lt;/head&gt;&lt;body&gt;{CONTENT}&lt;/body&gt;&lt;/html&gt;',

	/**
	* @static
	* @method getDocType
	* @description Parses document.doctype and generates a DocType to match the parent page, if supported.
	* For IE8, it grabs document.all[0].nodeValue and uses that. For IE &lt; 8, it falls back to Frame.DOC_TYPE.
	* @returns {String} The normalized DocType to apply to the iframe
	*/
	getDocType: function() {
		var dt = $.config.doc.doctype,
			str = Frame.DOC_TYPE;

		if (dt) {
			str = '&lt;!DOCTYPE ' + dt.name + ((dt.publicId) ? ' ' + dt.publicId : '') + ((dt.systemId) ? ' ' + dt.systemId : '') + '&gt;';
		} else {
			if ($.config.doc.all) {
				dt = $.config.doc.all[0];
				if (dt.nodeType) {
					if (dt.nodeType === 8) {
						if (dt.nodeValue) {
							if (dt.nodeValue.toLowerCase().indexOf('doctype') !== -1) {
								str = '&lt;!' + dt.nodeValue + '&gt;';
							}
						}
					}
				}
			}
		}
		return str;
	},
	/**
	* @static
	* @property DOC_TYPE
	* @description The DOCTYPE to prepend to the new document when created. Should match the one on the page being served.
	* @type String
	*/
	DOC_TYPE: '&lt;!DOCTYPE HTML PUBLIC "-/'+'/W3C/'+'/DTD HTML 4.01/'+'/EN" "http:/'+'/www.w3.org/TR/html4/strict.dtd"&gt;',
	/**
	* @static
	* @property META
	* @description The meta-tag for Content-Type to add to the dynamic document
	* @type String
	*/
	//META: '&lt;meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/&gt;&lt;meta http-equiv="X-UA-Compatible" content="IE=EmulateIE7"&gt;',
	META: '&lt;meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/&gt;',
	/**
	* @static
	* @property NAME
	* @description The name of the class (frame)
	* @type String
	*/
	ATTRS: {
		/**
		* @attribute title
		* @description The title to give the blank page.
		* @type String
		*/
		title: {
			value: 'Blank Page'
		},
		/**
		* @attribute dir
		* @description The default text direction for this new frame. Default: ltr
		* @type String
		*/
		dir: {
			value: 'ltr'
		},
		/**
		* @attribute lang
		* @description The default language. Default: en-US
		* @type String
		*/
		lang: {
			value: 'en-US'
		},
		/**
		* @attribute src
		* @description The src of the iframe/window. Defaults to javascript:;
		* @type String
		*/
		src: {
			//Hackish, IE needs the false in the Javascript URL
			value: 'javascript' + (($.UA.ie) ? ':false' : ':') + ';'
		},
		/**
		* @attribute content
		* @description The string to inject into the body of the new frame/window.
		* @type String
		*/
		content: {
			value: '',
			setter: '_setHTML',
			getter: '_getHTML'
		},
		/**
		* @attribute use
		* @description Array of modules to include in the scoped YUI instance at render time. Default: ['none', 'selector-css2']
		* @writeonce
		* @type Array
		*/
		use: {
			writeOnce: true,
			value: ['node']
		},
		/**
		* @attribute container
		* @description The container to append the iFrame to on render.
		* @type String/HTMLElement/Node
		*/
		container: {
			value: 'body',
			setter: function(n) {
				return $(n).item(0);
			}
		},
		/**
		* @attribute node
		* @description The Node instance of the iframe.
		* @type Node
		*/
		node: {
			readOnly: true,
			value: null,
			getter: function() {
				return this._iframe;
			}
		},
		/**
		* @attribute id
		* @description Set the id of the new Node. (optional)
		* @type String
		* @writeonce
		*/
		id: {
			writeOnce: true,
			getter: function(id) {
				if (!id) {
					id = 'iframe-' + (++jet.Widget._uid);
				}
				return id;
			}
		},
		/**
		* @attribute linkedcss
		* @description An array of url's to external linked style sheets
		* @type String
		*/
		linkedcss: {
			value: '',
			getter: '_getLinkedCSS',
			setter: '_setLinkedCSS'
		},
		/**
		* @attribute extracss
		* @description A string of CSS to add to the Head of the Editor
		* @type String
		*/
		extracss: {
			value: '',
			setter: '_setExtraCSS'
		},
		/**
		* @private
		* @attribute rendered
		* @description Internal reference set when render is called.
		* @type Boolean
		*/
		rendered: {
			value: false
		}
	}
}, {
	/**
	* @private
	* @property _ready
	* @description Internal reference set when the content is read$.
	* @type Boolean
	*/
	_ready: null,
	/**
	* @private
	* @property _iframe
	* @description Internal Node reference to the iFrame or the window
	* @type Node
	*/
	_iframe: null,
	/**
	* @private
	* @property _instance
	* @description Internal reference to the YUI instance bound to the iFrame or window
	* @type YUI
	*/
	_instance: null,
	/**
	* @private
	* @method _create
	* @description Create the iframe or Window and get references to the Document &amp; Window
	* @return {Object} Hash table containing references to the new Document &amp; Window
	*/
	_create: function(cb) {
		var win, doc, res, node;
		
		this._iframe = $('&lt;div/&gt;').html(Frame.HTML).first();
		this._iframe.css('visibility', 'hidden');
		this._iframe.attr('src', this.get('src'));
		this.get('container').append(this._iframe);

		this._iframe.css('height', '100%');

		
		var html = '',
			extra_css = ((this.get('extracss')) ? '&lt;style id="extra_css"&gt;' + this.get('extracss') + '&lt;/style&gt;' : '');

		html = substitute(Frame.PAGE_HTML, {
			DIR: this.get('dir'),
			LANG: this.get('lang'),
			TITLE: this.get('title'),
			META: Frame.META,
			LINKED_CSS: this.get('linkedcss'),
			CONTENT: this.get('content'),
			DEFAULT_CSS: Frame.DEFAULT_CSS,
			EXTRA_CSS: extra_css
		});
		if ($.config.doc.compatMode != 'BackCompat') {
			
			//html = Frame.DOC_TYPE + "\n" + html;
			html = Frame.getDocType() + "\n" + html;
		}

		res = this._resolveWinDoc();
		res.doc.open();
		res.doc.write(html);
		res.doc.close();

		if (!res.doc.documentElement) {
			var timer = setInterval(function () {
				if (res.doc &amp;&amp; res.doc.documentElement) {
					cb(res);
					clearInterval(timer);
				}
			}, 1);
		} else {
			cb(res);
		}

	},
	/**
	* @private
	* @method _resolveWinDoc
	* @description Resolves the document and window from an iframe or window instance
	* @param {Object} c The YUI Config to add the window and document to
	* @return {Object} Object hash of window and document references, if a YUI config was passed, it is returned.
	*/
	_resolveWinDoc: function(c) {
		var config = (c) ? c : {};
		config.win = this._iframe.getDOMNode().contentWindow;
		config.doc = this._iframe.getDOMNode().contentWindow.document;
		if (!config.doc) {
			config.doc = $.config.doc;
		}
		if (!config.win) {
			config.win = $.config.win;
		}
		return config;
	},
	initializer: function() {
		
	},
	destructor: function() {
		var inst = this.getInstance();

		inst(inst.config.doc).unbind();
		inst = null;
		this._iframe.remove(true);
	},
	/**
	* @private
	* @method _onContentReady
	* @description Called once the content is available in the frame/window and calls the final use call
	* on the internal instance so that the modules are loaded properl$.
	*/
	_onContentReady: function(e) {
		if (!this._ready) {
			this._ready = true;
			this._iframe.css('visibility', '');
			var inst = this.getInstance();
			
			/**
			 * @event contentReady
			 * @description Fires when the content is ready to use
			 */
			this.fire('contentReady');

			/*if (e) {
				inst.config.doc = e.target.getDOMNode() || e.target;
			}*/
			//TODO Circle around and deal with CSS loading...
			/*args.push($.bind(function() {
				this.fire('ready');
			}, this));*/
			//inst.use.apply(inst, args);

			inst(inst.config.doc.documentElement).addClass('jet-js-enabled');
		}
	},
	/**
	* @private
	* @method _getHTML
	* @description Get the content from the iframe
	* @param {String} html The raw HTML from the body of the iframe.
	* @return {String}
	*/
	_getHTML: function(html) {
		if (this._ready) {
			var inst = this.getInstance();
			html = inst('body').html();
		}
		return html;
	},
	/**
	* @private
	* @method _setHTML
	* @description Set the content of the iframe
	* @param {String} html The raw HTML to set the body of the iframe to.
	* @return {String}
	*/
	_setHTML: function(html) {
		if (this._ready) {
			var inst = this.getInstance();
			inst('body').html(html);
		} else {
			//This needs to be wrapped in a contentReady callback for the !_ready state
			this.on('contentReady', $.bind(function(html, e) {
				var inst = this.getInstance();
				inst('body').html(html);
			}, this, html));
		}
		return html;
	},
	/**
	* @private
	* @method _setLinkedCSS
	* @description Set's the linked CSS on the instance..
	*/
	_getLinkedCSS: function(urls) {
		if (!$.Lang.isArray(urls)) {
			urls = [urls];
		}
		var str = '';
		if (!this._ready) {
			A.each(urls, function(v) {
				if (v !== '') {
					str += '&lt;link rel="stylesheet" href="' + v + '" type="text/css"&gt;';
				}
			});
		} else {
			str = urls;
		}
		return str;
	},
	/**
	* @private
	* @method _setLinkedCSS
	* @description Set's the linked CSS on the instance..
	*/
	_setLinkedCSS: function(css) {
		if (this._ready) {
			var inst = this.getInstance();
			inst.Get.css(css);
		}
		return css;
	},
	/**
	* @private
	* @method _setExtraCSS
	* @description Set's the extra CSS on the instance..
	*/
	_setExtraCSS: function(css) {
		if (this._ready) {
			var inst = this.getInstance(),
				node = inst.get('#extra_css');
			
			node.remove();
			inst.one('head').append($('&lt;style/&gt;').attr('id', 'extra_css').html(css));
		}
		return css;
	},
	/**
	* @private
	* @method _instanceLoaded
	* @description Called from the first YUI instance that sets up the internal instance.
	* This loads the content into the window/frame and attaches the contentReady event.
	* @param {jet} inst The internal YUI instance bound to the frame/window
	*/
	_instanceLoaded: function(inst) {
		this._instance = inst;
		this._onContentReady();
	},
	/**
	* @method getInstance
	* @description Get a reference to the internal YUI instance.
	* @return {jet} The internal YUI instance
	*/
	getInstance: function() {
		return this._instance;
	},
	/**
	* @method render
	* @description Render the iframe into the container config option or open the window.
	* @param {String/HTMLElement/Node} node The node to render to
	* @return {$.Frame}
	* @chainable
	*/
	render: function(node) {
		if (this.get('rendered')) {
			return this;
		}
		this.set('rendered', true);
		if (node) {
			this.set('container', node);
		}

		this._create($.bind(function(res) {

			res.win.jet = jet;

			var inst, timer,
			
				cb = $.bind(function(i) {
					i.config.win.jet_Config = $.mix({}, $.config);
					i.config.win.jet = jet;
					this._instanceLoaded(i);
				}, this),
				
				args = [],
				config = $.mix($.config, {
					win: res.win,
					doc: res.doc
				}, true, true),
				
				fn = $.bind(function() {
					config = this._resolveWinDoc(config);
					inst = jet(config);
					var req = this.get('use');
					req.push(cb);

					try {
						inst.use.apply(inst, req);
						if (timer) {
							clearInterval(timer);
						}
					} catch (e) {
						timer = setInterval(function() {
							fn();
						}, 350);
					}
				}, this);

			args.push(fn);

			$.use.apply($, args);

		}, this));

		return this;
	}
});
var FRAME = 'frame',
	CONTENT_WINDOW = 'contentWindow',
	CONTENT_DOCUMENT = 'contentDocument',
	A = $.Array;

/**
 * An extension that sandboxes a widget by putting its contentBox inside an iframe
 * @class Sandbox
 * @constructor
 */
function WidgetSandbox() {
	var frame = this.frame = new $.Frame({
		linkedcss: this.get('extraCss'),
		use: this.get('use'),
		on: {
			contentReady: $.bind(this._onFrameReady, this)
		}
	});
	this.after('render', this._renderFrame);
}

$.WidgetSandbox = $.mix(WidgetSandbox, {
	
	ATTRS: {
		extraScripts: {
			writeOnce: true,
			value: []
		},
		
		extraCss: {
			writeOnce: true,
			value: []
		},
		use: {
			value: []
		}
	}
	
});

WidgetSandbox.prototype = {
	
	/**
	 * @method getInstance
	 * @description Returns the jet instance inside the frame
	 */
	getInstance: function () {
		return this.frame.getInstance();
	},
	
	_renderFrame: function () {
		this.frame.render(this.get('boundingBox'));
	},
	
	_onFrameReady: function () {
		var self = this;
		var frame = this.frame;
		var inst = frame.getInstance();
		var contentDoc = inst.config.doc;
		var body = contentDoc.body;
		var contentBox = this.get('contentBox');
		var newContentBox;
		
		if (contentDoc.importNode) {
			newContentBox = contentDoc.importNode(contentBox.getDOMNode(), true);
		} else {
			// @TODO use a document fragment instead of a div
			newContentBox = contentDoc.createElement(this.get('boundingBox').attr('nodeName'));
			newContentBox.innerHTML = contentBox.attr('outerHTML');
			newContentBox = newContentBox.firstChild;
		}
		body.appendChild(newContentBox);
		$.wait(4, this, function () {
			A.each(this.get('extraScripts'), inst.Get.script, inst.Get);
			this.fire('ready');
		});
		this.set('contentBox', newContentBox);
		contentBox.remove();
	}
	 
};

			
});

</pre>

</div>
        </div>
    </div>
</div>
<script src="../assets/vendor/prettify/prettify-min.js"></script>
<script>prettyPrint();</script>
<script src="../assets/js/yui-prettify.js"></script>
<script src="../assets/js/tabs.js"></script>
</body>
</html>
