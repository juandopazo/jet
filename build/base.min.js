/*
 Copyright (c) 2010, Juan Ignacio Dopazo. All rights reserved.
 Code licensed under the BSD License
 http://code.google.com/p/jet-js/wiki/Licence
*/
jet().add("base",function(g){var w=Object.prototype,m=g.Hash,k=g.Lang,x=function(a){var c=function(){};c.prototype=a;return new c},n=function(a,c,e){if(!c||!a)g.error("extend failed, verify dependencies");var f=c.prototype,i=x(f);a.prototype=i;i.constructor=a;a.superclass=f;if(c!=Object&&f.constructor==w.constructor)f.constructor=c;e&&g.mix(i,e,true)},v=function(){var a={},c=this;this.on=function(e,f){a[e]||(a[e]=[]);k.isObject(f)&&a[e].push(f);return c};this.unbind=function(e,f){g.Array.remove(f,
a[e]||[]);return c};this.fire=function(e){var f=a[e]||[],i=true;if(a["*"])f=f.concat(a["*"]);var b,d=f.length,h=false,j=Array.prototype.slice.call(arguments,1);j.unshift({stopPropagation:function(){h=true},preventDefault:function(){i=false},type:e,target:c});for(b=0;b<d;b++){if(k.isFunction(f[b]))f[b].apply(c,j);else k.isObject(f[b])&&f[b].handleEvent&&f[b].handleEvent.apply(f[b],j);if(h)break}return i};this.unbindAll=function(){a={};return c}},p=function(a){p.superclass.constructor.apply(this);a=
a||{};var c=this,e={},f=function(b,d){e[b]=d;var h=k.isValue(a[b]);d.required&&d.readOnly&&g.error("You can't have both 'required' and 'readOnly'");d.readOnly&&h&&delete a[b];d.required&&!h&&g.error("Missing required attribute: "+b);if(h&&d.setter)a[b]=d.setter.call(c,a[b]);return c},i=function(b,d){e[b]=e[b]||{};var h=e[b];if(h.readOnly)g.error(b+" is a "+(h.writeOnce?"write-once":"read-only")+" attribute");else{if(!h.validator||h.validator(d)){d=h.setter?h.setter.call(c,d):d;if(!k.isValue(a[b])&&
h.value)a[b]=h.value;a[b]=a[b]==d?d:c.fire(b+"Change",d,a[b])?d:a[b]}if(h.writeOnce&&!h.readOnly)e[b].readOnly=true}};c.get=function(b){e[b]=e[b]||{};var d=e[b];if(d.writeOnce&&!d.readOnly)e[b].readOnly=true;if(!k.isValue(a[b]))a[b]=d.value;return d.getter?d.getter.call(c,a[b],b):a[b]};c.set=function(b,d){k.isHash(b)?m.each(b,function(h,j){i(h,j)}):i(b,d);return c};c.unset=function(b){delete a[b];return c};c.addAttr=f;c.addAttrs=function(b){m.each(b,f);return c};c.getAttrs=function(){var b={};m.each(a,
function(d){b[d]=c.get(d)});return b};c.isSet=function(b){return k.isValue(a[b])}};n(p,v);var y=function(a,c,e){for(a=a.constructor;a!=c;){e(a);a=a.superclass.constructor}},q=function(){q.superclass.constructor.apply(this,arguments);var a=this.addAttr("on",{writeOnce:true,value:{}});m.each(a.get("on"),function(c,e){a.on(c,e)});y(this,p,function(c){if(c.ATTRS){console.log(c.ATTRS);a.addAttrs(c.ATTRS)}})};n(q,p);var r=function(){r.superclass.constructor.apply(this,arguments);var a=this;g(g.win).on("unload",
function(){a.destroy&&a.destroy()})};n(r,q,{destroy:function(){var a=this;a.fire("destroy")&&m.each(a,function(c){delete a[c]})}});var o=function(){o.superclass.constructor.apply(this,arguments);var a=this;g(g.win).on("unload",function(){a.destroy&&a.destroy()})};o.ATTRS={srcNode:{setter:g},classPrefix:{value:o.CSS_PREFIX+"-"},className:{value:"widget"},rendered:{value:false},boundingBox:{readOnly:true,value:g("<div/>")}};n(o,q,{hide:function(){this.fire("hide")&&this.get("boundingBox").css("visibility",
"hidden");return this.fire("afterHide")},show:function(){this.fire("show")&&this.get("boundingBox").css("visibility","visible");return this.fire("afterShow")},focus:function(){return this.set("focused",true)},blur:function(){return this.set("focused",false)},render:function(a){a&&this.set("srcNode",a);if(this.fire("render")){a=this.get("srcNode");this.get("boundingBox").addClass(this.get("classPrefix")+this.get("className")).appendTo(a).css("visibility","visible");this.set("rendered",true).focus().fire("afterRender")}return this},
destroy:function(){var a=this;if(a.fire("destroy")){a.get("boundingBox").unbindAll(true).remove();m.each(a,function(c){delete a[c]})}}});o.CSS_PREFIX="yui";var u=function(){u.superclass.constructor.apply(this,arguments);var a=this.addAttr("frequency",{value:20}),c,e,f,i=false,b=new g.NodeList([]),d;a.addAttr("tracking",{value:false,validator:k.isBoolean}).on("trackingChange",function(h,j){if(j){if(a.get("shim")){var s=[];d=g("iframe").each(function(l){l=g(l);var t=l.offset();s.push(g("<div/>").height(t.height).width(t.width).css({position:"absolute",
left:t.left,top:t.top}).hide().appendTo(l.parent())[0])});b=g(s)}if(!i){b.show();f=setInterval(function(){a.fire("mousemove",c,e)},a.get("frequency"));i=true}}else{b.hide();clearInterval(f);i=false}});g(g.context).on("selectstart",function(h){i&&h.preventDefault()});b.link(g(g.context),true).on("mousemove",function(h){c=h.clientX;e=h.clientY;a.get("tracking")&&a.get("shim")&&d.each(function(j,s){j=g(j);var l=j.offset();g(b[s]).height(l.height).width(l.width).css({left:l.left+"px",top:l.top+"px"})})}).on("mouseup",
function(){a.set("tracking",false).fire("up",c,e)});a.on("destroy",function(){b.unbindAll()})};n(u,r,{down:function(){return this.set("tracking",true)},up:function(){return this.set("tracking",false)}});g.utils.Mouse=u;g.add({Attribute:p,Base:q,Utility:r,Widget:o,EventTarget:v,augment:function(a,c,e){if(k.isFunction(c))c=new c;var f=function(i,b){if((!a.prototype[i]||e)&&i!="constructor")a.prototype[i]=b};m.each(c,f);c.constructor!=Object&&m.each(c.prototype,f)},extend:n})});
