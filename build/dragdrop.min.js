jet().add("dragdrop",function(a){var o=a.Array,r=a.Lang,l=function(){l.superclass.constructor.apply(this,arguments);var b=this.addAttrs({node:{required:true,setter:function(f){return a(f)}},cursor:{value:"move"},tracking:{value:false}});b.addAttr("handlers",{setter:function(f){return a(f)}});var g,c,h,i,j,k,d=new a.utils.MouseTracker,m=function(f){f.css("cursor",b.get("cursor")).on("mousedown",function(e){e.preventDefault();g=e.clientX;c=e.clientY;if(b.fire("start",g,c)){e=a(this).offset();h=e.left;
i=e.top;d.set("tracking",true)}})};b.addHandler=function(f){m(a(f))};var p=b.get("handlers");p?m(p):m(b.get("node"));a(a.context).on("mouseup",function(){d.set("tracking",false)});var q=true;d.on("trackingChange",function(f,e){!q&&e===false&&b.fire("end",j,k);q=false});var s=b.get("node");d.on("mousemove",function(f,e,t){j=h+e-g;k=i+t-c;b.fire("drag",j,k)&&s.css({left:j+"px",top:k+"px"})})};l.NAME="drag";a.extend(l,a.Base);var n=function(){n.superclass.constructor.apply(this,arguments);var b=this.addAttrs({targets:{validator:r.isArray,
value:[],setter:function(c){o.each(c,function(h,i){c[i]=a(h)});return c}}}),g=[];b.addTarget=function(c){g[g.length]=a(c)};b.on("end",function(c,h,i){c=b.get("targets").concat(g);var j=false;o.each(c,function(k){var d=k.offset();if(h>d.left&&h<d.left+d.width&&i>d.top&&i<d.top+d.height){b.fire("drop:hit",k);j=true}});j||b.fire("drop:miss")})};a.extend(n,l);a.add({Drag:l,DragDrop:n})});
