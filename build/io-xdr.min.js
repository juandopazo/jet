/**
 * @module io-xdr
 * @requires base,io
 * 
 * Copyright (c) 2011, Juan Ignacio Dopazo. All rights reserved.
 * Code licensed under the BSD License
 * https://github.com/juandopazo/jet/blob/master/LICENSE.md
*/
jet.add("io-xdr",function(d){var e=d.IO,b=jet.namespace("IO"),g=b.flajax;if(!g){b.xdrWaitList=[];window.flajaxLoad=function(){b.xdrReady=true;for(var a=0;a<b.xdrWaitList.length;a++)e.flajax(b.xdrWaitList[a]);b.xdrWaitList=[]};d("<div/>").attr("id","flajax").appendTo(d("#jet-tracker"));d.swfobject.embedSWF("/jet/src/io/flajax.swf","flajax","1","1","9.0.0","expressInstall.swf",{},{},{},function(a){g=b.flajax=a.ref})}jet.namespace("IO.xdrCallbacks");if(!b.xdrCount)b.xdrCount=1;e.flajax=function(a){if(b.xdrReady){a=
a||{};var h=a.method||"GET",f=++b.xdrCount;b.xdrCallbacks["flajax"+f]=function(c){switch(a.dataType){case "xml":c=e.utils.parseXML(c);break;case "json":c=d.JSON.parse(c);break}a.success&&a.success(c);a.complete&&a.complete(c)};b.xdrCallbacks["flajax"+f+"Error"]=function(c){a.error&&a.error(c);a.complete&&a.complete(c)};b.flajax.call(a.url,"jet.IO.xdrCallbacks.flajax"+f,h,a.data)}else b.xdrWaitList.push(a)}});
