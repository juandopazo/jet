/**
 * @module layout
 * @requires base,resize,widget-parentchild
 * 
 * Copyright (c) 2011, Juan Ignacio Dopazo. All rights reserved.
 * Code licensed under the BSD License
 * https://github.com/juandopazo/jet/blob/master/LICENSE.md
*/
jet.add("layout",function(d){function c(){}c.Vertical="v";c.Horizontal="h";d.mix(c,{ATTRS:{direction:{value:c.Vertical,writeOnce:true},minSize:{value:0,wriceOnce:true},shim:{value:false,writeOnce:true},defaultChildType:{value:"LayoutPanel"}},EVENTS:{afterRender:"_uiLayoutRender",afterAddChild:"_setupChildResize",removeChild:"_destroyChildResize"},HTML_PARSER:{direction:function(a){return a.hasClass(this.getClassName(c.Horizontal))?c.Horizontal:c.Vertical}}});c.prototype={_uiLayoutRender:function(){var a=
this.get("direction"),b=this.get("boundingBox"),f=a==c.Horizontal?"width":"height",e=0,g=0,i=this.get("children").length;i>0&&b.addClass(this.getClassName(a));this.each(function(h){e+=h.get(f)||0});g=(b[f]()-e)/i;this.each(function(h){h.get(f)||h.set(f,g)})},_setupChildResize:function(a,b,f){a=d.Resize;var e=this.get("minSize"),g=this.get("direction");if(f>0){b.resize=new a({node:b.get("boundingBox"),handles:[g==c.Horizontal?a.Left:a.Top],minWidth:e,minHeight:e,shim:this.get("shim")});b.resize.on("resize:start",
this._onChildResizeStart,b);b.resize.on("resize",this._onChildResize,b)}b.get("boundingBox").addClass(b.getClassName("child",g))},_destroyChildResize:function(a,b){b.resize.destroy();b.resize=null},_onChildResizeStart:function(){var a=this.previous(),b=a.get("boundingBox");a._originalWidth=b.width();a._originalHeight=b.height()},_onChildResize:function(a,b,f){a=a.target;var e=this.previous(),g=e.get("boundingBox");this.get("parent").get("direction")==c.Horizontal?g.width(a.get("originalWidth")-b+
e._originalWidth):g.height(a.get("originalHeight")-f+e._originalHeight)}};d.LayoutPanel=d.Base.create("layout-panel",d.Widget,[c,d.WidgetParent,d.WidgetChild],{},{CONTENT_TEMPLATE:null});d.Layout=d.Base.create("layout",d.Widget,[c,d.WidgetParent],{},{CONTENT_TEMPLATE:null})});
