/**
 * @module widget-form
 * @requires base,form
 * 
 * Copyright (c) 2012, Juan Ignacio Dopazo. All rights reserved.
 * Code licensed under the BSD License
 * https://github.com/juandopazo/jet/blob/master/LICENSE.md
*/
jet.add("widget-form",function(b){function e(){this._formContainer=this.get("contentBox");this.data=new b.Record2;this.form=new b.Form(this.get("form"));this.form.each(this._linkDataToView,this);this.on("renderUI",this._wfRenderUI)}b.Record2=b.Base.create("record",b.Base,[],{BLACKLIST:{on:1,after:1,initialized:1}},{getData:function(){var a={};b.Object.each(this.getAttrs(),function(c,d){b.Record2.BLACKLIST[c]||(a[c]=d)});return a}});e.prototype={_linkDataToView:function(a){var c=a.get("name");if(a.get("type")==
b.FieldSet)a.each(function(d){this._linkDataToView(d)},this);else{this.data.set(c,a.get("value"));this.data.after(c+"Change",this._wfOnRecordChange,a);a.after("valueChange",this._wfOnFieldChange,this.data)}},_wfOnRecordChange:function(a){a.src!="form"&&this.set("value",a.newVal,{src:"record"})},_wfOnFieldChange:function(a){a.src!="record"&&this.set(a.target.get("name"),a.newVal)},_wfRenderUI:function(){this.form.render(this._formContainer)}};b.WidgetForm=e});
