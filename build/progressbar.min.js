/*
 Copyright (c) 2010, Juan Ignacio Dopazo. All rights reserved.
 Code licensed under the BSD License
 http://code.google.com/p/jet-js/wiki/Licence
*/
jet().add("progressbar",function(e){var i=e.Array,f=function(){f.superclass.constructor.apply(this,arguments);var b=this,n=function(a){var c=b.get("minValue");a=(a-c)/(b.get("maxValue")-c);var d=b.get("bar");c=b.get("width");var g=b.get("height"),h=b.get("direction"),j=b.get("easing"),k=b.get("duration");if(b.get("animate")){d=new e.Tween({node:d,duration:k,easing:j,on:{tween:function(l,m){b.fire("progress",m)||l.preventDefault()},end:function(){b.fire("end")}}});switch(h){case "ttb":case "btt":d.set("to",
{height:g*a});break;default:d.set("to",{width:c*a})}d.play()}else{switch(h){case "ttb":case "btt":a*=g;d.height(a);break;default:a*=c;d.width(a)}b.fire("progress",a);b.fire("end")}};this.addAttrs({minValue:{value:0},maxValue:{value:100},value:{value:0},width:{value:200},height:{value:20},direction:{value:"ltr"},animate:{value:false,validator:function(){return!!e.Tween}},easing:{},duration:{value:500},bar:{readOnly:true,value:e("<span/>")}}).on("valueChange",function(a,c){b.fire("progress",c)?n(c):
a.preventDefault()}).on("directionChange",function(a,c,d){b.get("boundingBox").removeClass(CLASS_PREFOX+d).addClass("jet-pbar-"+c)}).on("render",function(){var a=this.get("boundingBox").addClass("jet-pbar-container").width(this.get("width")).height(this.get("height"));a=this.get("bar").appendTo(a).addClass("jet-pbar-bar");this.get("direction")=="ltr"?a.height(this.get("height")):a.width(this.get("width"))});i.each(["width","height"],function(a){b.on(a+"Change",function(c,d){b.get("boundingBox")[a](d)})})};
e.extend(f,e.Widget);e.ProgressBar=f});
