/**
 * @module progressbar
 * @requires base
 * 
 * Copyright (c) 2011, Juan Ignacio Dopazo. All rights reserved.
 * Code licensed under the BSD License
 * https://github.com/juandopazo/jet/blob/master/LICENSE.md
*/
jet.add("progressbar",function(d){d.ProgressBar=d.Base.create("progressbar",d.Widget,[],{ATTRS:{minValue:{value:0},maxValue:{value:100},value:{value:0},width:{value:200},height:{value:20},direction:{value:"ltr",writeOnce:true},animate:{value:false,writeOnce:true,validator:function(){return!!d.Tween}},easing:{},duration:{value:500},bar:{readOnly:true,value:d("<span/>")}},EVENTS:{valueChange:function(a,b){this.fire("progress",b)?this._update(b):a.preventDefault()},directionChange:function(a,b,c){this.get("boundingBox").removeClass(this.getClassName(c)).addClass(this.getClassName(b))},
render:function(){var a=this.get("direction"),b=this.get("bar").appendTo(this.get("contentBox")).addClass(this.getClassName("bar"));this.get("boundingBox").addClass(this.getClassName(a));a=="ltr"?b.height(this.get("height")):b.width(this.get("width"))}}},{_update:function(a){var b=this.get("minValue");a=(a-b)/(this.get("maxValue")-b);var c=this.get("bar");b=this.get("width");var e=this.get("height"),f=this.get("direction"),g=this.get("easing"),h=this.get("duration");if(this.get("animate")){c=new d.Tween({node:c,
duration:h,easing:g,on:{tween:function(i,j){this.fire("progress",j)||i.preventDefault()},end:function(){this.fire("end")}}});switch(f){case "ttb":case "btt":c.set("to",{height:e*a});break;default:c.set("to",{width:b*a})}c.play()}else{switch(f){case "ttb":case "btt":a*=e;c.height(a);break;default:a*=b;c.width(a)}this.fire("progress",a);this.fire("end")}}})});
