jet().add("plasma",function(d){var D=d.Lang,E=d.Hash,i=d.Array,e=!d.UA.ie||d.UA.ie>8,y=d.Node,z=y.prototype,A=function(a){return a.toString(16)},B=function(a){return parseInt(a,16)},k;try{!document.namespaces.vml&&document.namespaces.add("vml","urn:schemas-microsoft-com:vml");k=function(a){return d.context.createElement("<vml:"+a+' class="vml">')}}catch(I){k=function(a){return d.context.createElement("<"+a+' xmlns="urn:schemas-microsoft.com:vml" class="vml">')}}if(!e){var l=d.context.createStyleSheet();
l.addRule(".vml","behavior:url(#default#VML)");l.addRule(".vml","display:inline-block")}var n=function(a){return e?function(){return this._node.getAttribute(a)}:i.inArray(a,o)?function(){return this._node.style[a]}:function(){return this._node[a]}},F=function(a){return e?function(c){this._node.setAttribute(a,c);return c}:i.inArray(a,o)?function(c){return this._node.style[a]=c}:function(c){return this._node[a]=c}},p={},o=["width","height","left","top"];l=["x","y","rx","ry","xmlns","version","fill",
"opacity"].concat(o);var g={fill:"fillcolor",x:"left",y:"top",cx:"left",cy:"top"};if(e)l=l.concat(o);i.each(l,function(a){var c=!e&&g[a]?g[a]:a;p[a]={getter:n(c),setter:F(c)}});var v={stroke:"color","stroke-width":"weight","stroke-opacity":"opacity","stroke-linecap":"endcap","stroke-linejoin":"joinstyle","stroke-miterlimit":"miterlimit","stroke-dasharray":"dashstyle"},G=function(a){return e?function(){this._node.getAttribute(a)}:function(){return this.get("stroke")[v[a]]}},H=function(a){return e?
function(c){this._node.setAttribute(a,c);return c}:function(c){var b=this.get("stroke-node");b.on=true;return b[v[a]]=c}};E.each(v,function(a){p[a]={getter:G(a),setter:H(a)}});var f=e?function(){f.superclass.constructor.apply(this,arguments);var a=this;a.addAttr("node",{required:true,getter:function(){return a._node},setter:function(b){a._node=b.nodeType?b:d.context.createElementNS("http://www.w3.org/2000/svg",b);return a._node}});var c=a.get("node");a._node=c.nodeType?c:d.context.createElementNS("http://www.w3.org/2000/svg",
c);a.addAttrs(p).addAttr("fill-opacity",{getter:function(){return this.get("node").getAttribute("fill-opacity")},setter:function(b){this.get("node").setAttribute("opacity",b);return b}})}:function(){f.superclass.constructor.apply(this,arguments);var a=this;a.addAttr("node",{required:true,getter:function(){return a._node},setter:function(j){a._node=j.nodeType?j:k(j);return a._node}});var c=a.get("node");a._node=c.nodeType?c:k(c);c.style.position="absolute";var b=k("stroke");b.on=false;c.appendChild(b);
a.set("stroke-node",b);b=k("fill");c.appendChild(b);a.set("fill-node",b);a.addAttrs(p).addAttr("fill-opacity",{getter:function(){return this.get("fill-node").opacity},setter:function(j){return this.get("fill-node").opacity=j}})};d.extend(f,d.Attribute,{rotate:function(){},translate:function(){},scale:function(){}});i.each(["append","appendTo","on","unbind","unbindAll","remove","hide","show","children"],function(a){f.prototype[a]=z[a]});var w=function(){var a=[],c=function(b){if(b instanceof f)a[a.length]=
b;else if(b.nodeType||D.isString(b))a[a.length]=new f(b)};i.each(arguments,function(b){b.length?i.each(b,c):c(b)});this._nodes=a};d.extend(w,d.Attribute,{});i.each(["each","append","appendTo","on","unbind","unbindAll","remove","hide","show"],function(a){w.prototype[a]=z[a]});var q=function(a){a.node="rect";q.superclass.constructor.apply(this,arguments)};d.extend(q,f);var C=function(a){a.node=e?"rect":"roundrect";C.superclass.constructor.apply(this,arguments)};d.extend(C,f);var x=function(a){a.node=
e?"ellipse":"oval";x.superclass.constructor.apply(this,arguments);var c=this.addAttrs({rx:{getter:e?function(){return this._node.getAttribute("rx")}:function(){return d.pxToFloat(this._node.style.width)/2},setter:e?function(b){this._node.setAttribute("rx",b);return b}:function(b){this._node.style.width=b*2;return b}},ry:{getter:e?function(){return this._node.getAttribute("ry")}:function(){return d.pxToFloat(this._node.style.width)/2},setter:e?function(b){this._node.setAttribute("ry",b);return b}:
function(b){this._node.style.height=b*2;return b}}});c.addAttrs({cx:{getter:n(!e&&g.cx?g.cx:"cx"),setter:e?function(b){this._node.setAttribute("cx",b);return b}:function(b){this._node.style.left=b-d.pxToFloat(c.get("rx"))+"px";return b}},cy:{getter:n(!e&&g.cy?g.cy:"cy"),setter:e?function(b){this._node.setAttribute("cy",b);return b}:function(b){this._node.style.top=b-d.pxToFloat(c.get("ry"))/2+"px";return b}}})};d.extend(x,f);var r=function(a){a.node=e?"circle":"oval";r.superclass.constructor.apply(this,
arguments);var c=this.addAttrs({r:{getter:e?function(){return this._node.getAttribute("r")}:function(){return this._node.style.width},setter:e?function(b){this._node.setAttribute("r",b);return b}:function(b){var j=this._node.style;j.width=b*2;j.height=b*2;return b}}});c.addAttrs({cx:{getter:n(!e&&g.cx?g.cx:"cx"),setter:e?function(b){this._node.setAttribute("cx",b);return b}:function(b){this._node.style.left=b-d.pxToFloat(c.get("r"))/2+"px";return b}},cy:{getter:n(!e&&g.cy?g.cy:"cy"),setter:e?function(b){this._node.setAttribute("cy",
b);return b}:function(b){this._node.style.top=b-d.pxToFloat(c.get("r"))/2+"px";return b}}})};d.extend(r,f);var s=function(a){s.superclass.constructor.call(this,"Image");this.attr(a)};d.extend(s,f);var t=function(a){t.superclass.constructor.call(this,"text");this.attr(a)};d.extend(t,f);var u=function(a){u.superclass.constructor.call(this,"path");this.attr(a)};d.extend(u,f);var h=e?function(){h.superclass.constructor.apply(this,arguments);var a=new f({node:"svg",xmlns:"http://www.w3.org/2000/svg",version:"1.1"});
this.addAttrs({srcNode:{required:true,setter:d},width:{setter:function(c){a.set("width",c);return c}},height:{setter:function(c){a.set("height",c);return c}},boundingBox:{readOnly:true,getter:function(){return a}}}).get("srcNode").append(a)}:function(){h.superclass.constructor.apply(this,arguments);var a=new y("div");a.css({position:"relative",overflow:"hidden"});this.addAttrs({srcNode:{required:true,setter:function(c){return d(c)}},width:{setter:function(c){a.css("width",c);return c}},height:{setter:function(c){a.css("height",
c);return c}},boundingBox:{readOnly:true,getter:function(){return a}}}).get("srcNode").append(a)},m=function(a,c){return a.set("plasma",c).appendTo(c.get("boundingBox"))};d.extend(h,d.TimeFrame,{rectangle:function(a){return m(new q(a),this)},circle:function(a){return m(new r(a),this)},ellipse:function(a){return m(new x(a),this)},image:function(a){return m(new s(a),this)},text:function(a){return m(new t(a),this)},path:function(a){return m(new u(a),this)},link:function(){return new w(arguments)},clear:function(){this.get("boundingBox").children().remove()}});
h.Circle=r;h.Rectangle=q;h.Image=s;h.Text=t;h.Path=u;d.add({Plasma:h,decToHex:A,hexToDec:B,colorHexToArray:function(a){if(a.substr(0,1)=="#")a=a.substr(1);a=a.length==3?[a.substr(0,1)+a.substr(0,1),a.substr(1,1)+a.substr(1,1),a.substr(2,1)+a.substr(2,1)]:[a.substr(0,2),a.substr(2,2),a.substr(4,2)];i.each(a,function(c,b){a[b]=B(c)});return a},colorArrayToHex:function(a){for(var c=0;c<3;c++){a[c]=A(a[c]);if(a[c]<10)a[c]="0"+a[c]}return"#"+a.join("")}})});
