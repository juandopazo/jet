/*
Copyright (c) 2011, Juan Ignacio Dopazo. All rights reserved.
Code licensed under the BSD License
https://github.com/juandopazo/jet/blob/master/LICENSE.md

@module jet
*/
window.jet||function(){function G(b){var a=function(f,g){g(f);for(f=f.firstChild;f;){f.nodeType!=3&&a(f,g);f=f.nextSibling}},d=function(f,g){d=g.getElementsByClassName?function(j,i){return i.getElementsByClassName(j)}:function(j,i){var o=[];a(i,function(q){var z=q.className;if(z&&l.indexOf(j,z.split(" "))>-1)o[o.length]=q});return o};return d(f,g)},c=function(f,g){g=g||c.context;if(h.isString(f)){g=f.substr(0,1)=="#"&&g.ownerDocument?g.ownerDocument:g;f=c.parseQuery(f,g);f=!h.isValue(f)?new c.NodeList([]):
new c.NodeList(f)}else f=new c.NodeList(f);return f},e=function(f){t(c,f,true)};if(b.win.JSON)c.JSON=b.win.JSON;e({bind:A,win:b.win,context:b.doc,parseQuery:function(f,g){g=g||c.context;var j=f.substr(0,1),i;if(j=="<")if(f.match(/</g).length==1)return g.createElement(f.substr(1,f.length-3));else{j=f.match(/<([a-z]+)>(.+)<\/([a-z]+)>/i);i=null;if(j.length==4&&j[1]==j[3]){i=g.createElement(j[1]);i.innerHTML=j[2]}else c.error("Wrong element creation string");return i}else return j=="#"?g.getElementById(f.substr(1)):
j=="."?d(f.substr(1),g):g.getElementsByTagName(f)},mix:t,add:e,walkTheDOM:a,Lang:h,Array:l,ArrayList:u,Hash:n,config:b,UA:v});c.Get=new w(b);return c}function B(b,a){var d=b.base,c=function(e){a.css(e.fullpath||(e.path?d+e.path:d+e.name+(b.minify?".min.css":".css")),function(){jet.add(e.name,function(){})})};return function(){var e=C.call(arguments),f=0,g,j=e.pop();if(l.indexOf("*",e)>-1){e=[];r.unshift.apply(e,n.keys(b.modules))}else l.indexOf(k,e)==-1&&e.unshift(k);e=e;f=0;for(var i,o,q;f<e.length;){i=
e[f];g=1;if(h.isString(i))i=b.modules[i.toLowerCase()];if(i&&i.requires){o=i.requires;for(i=o.length-1;i>=0;i--){q=l.indexOf(o[i],e);if(q==-1){e.splice(f,0,o[i]);g=0}else if(q>f){e.splice(f,0,e.splice(q,1)[0]);g=0}}}f+=g}b.win.JSON&&l.remove("json",e);e=e;for(f=0;f<e.length;f++){g=e[f];if(h.isString(g)&&b.modules[g])e[f]=g=b.modules[g];if(!h.isObject(g)||g.type==m&&!b.loadCss){e.splice(f,1);f--}else{g.fullpath=g.fullpath||d+g.path;if(!(s[g.name]||D[g.fullpath])){if(!g.type||g.type=="js")a.script(g.fullpath);
else g.type==m&&x(c,g);D[g.fullpath]=1}}}p.push({main:j,req:e,onProgress:b.onProgress,config:b});E()}}var F=document,k="base",m="css",H={base:location.protocol+"//github.com/juandopazo/jet/raw/master/build/",modules:{log:{},oop:{},node:["log","oop"],xsl:["node"],swf:{},json:["node"],cookie:[k],sizzle:["node"],base:["node"],io:["json"],"io-xdr":["node","swf","io"],history:[k,"json"],"resize-styles":{type:m,beacon:{name:"borderLeftStyle",value:"solid"}},resize:[k,"resize-styles"],"button-styles":{type:m,
beacon:{name:"borderBottomStyle",value:"solid"}},button:["widget-parentchild","button-styles"],"container-styles":{type:m,beacon:{name:"borderRightStyle",value:"solid"}},container:[k,"widget-alignment","widget-stack","container-styles"],"progressbar-styles":{type:m,beacon:{name:"cursor",value:"pointer"}},progressbar:[k,"progressbar-styles"],dragdrop:[k],imageloader:[k],anim:[k],datasource:[k],"datatable-styles":{type:m,beacon:{name:"borderTopStyle",value:"solid"}},datatable:["io","datasource","datatable-styles"],
"tabview-styles":{type:m,beacon:{name:"display",value:"none"}},"treeview-styles":{type:m,beacon:{name:"visibility",value:"hidden"}},tabview:["widget-parentchild","tabview-styles"],treeview:["widget-parentchild","treeview-styles"],"widget-alignment":[k],"widget-stack":[k],"widget-parentchild":[k],"widget-sandbox":[k],menu:["widget-parentchild","container"],vector:["anim"],layout:["resize","widget-parentchild"]}},r=Array.prototype,I=String.prototype,C=r.slice,J=Object.prototype.toString,l,n,h=function(){var b=
{number:"number",string:"string",undefined:"undefined","[object Function]":"function","[object Array]":"array","boolean":"boolean"},a=function(c){return b[typeof c]||b[J.call(c)]||(c?"object":"null")},d=function(c){return/^s*function[^{]+{s*[native code]s*}s*$/.test(c)};return{isNumber:function(c){return a(c)==="number"&&isFinite(c)},isString:function(c){return a(c)==="string"},isArray:function(c){return a(c)==="array"},isFunction:function(c){return a(c)==="function"},isObject:function(c,e){var f=
typeof c;return c&&(f==="object"||!e&&(f==="function"||h.isFunction(c)))||false},isBoolean:function(c){return typeof c=="boolean"},isUndefined:function(c){return typeof c=="undefined"},type:a,isNative:d,isValue:function(c){var e=a(c);switch(e){case "number":return isFinite(c);case "null":case "undefined":return false;case "boolean":return true;default:return!!e}},is:function(c){return c instanceof this},trim:d(I.trim)?function(c){return c.trim()}:function(c){c=c.replace(/^\s\s*/,"");for(var e=/\s/,
f=c.length-1;e.test(c.charAt(f));)f--;return c.slice(0,f+1)},capitalize:function(c){return c.substr(0,1).toUpperCase()+c.substr(1).toLowerCase()},random:function(c){c=Math.random()*c;return c===0?0:Math.ceil(c)-1},clone:function c(e){var f;if(h.isHash(e)){f={};n.each(e,function(g,j){f[g]=c(j)})}else if(h.isArray(e)){f=[];l.each(e,function(g){f[f.length]=c(g)})}else f=e;return f}}}(),A;A=Function.prototype.bind?function(b){return Function.prototype.bind.apply(b,C.call(arguments,1))}:function(b,a){var d=
[].slice,c=d.call(arguments,2),e=function(){},f=function(){return b.apply(this instanceof e?this:a||{},c.concat(d.call(arguments)))};e.prototype=b.prototype;f.prototype=new e;return f};l={each:h.isNative(r.forEach)?function(b,a,d){b.forEach(a,d)}:function(b,a,d){b=b||[];var c,e=b.length;for(c=0;c<e;c++)a.call(d,b[c],c,b)},remove:function(b,a){for(var d=0,c=a.length;d<c;)if(a[d]==b)a.splice(d,1);else d++;return a},indexOf:h.isNative(r.indexOf)?function(b,a){return a.indexOf(b)}:function(b,a){var d,
c=a.length;for(d=0;d<c;d+=1)if(a[d]==b)return d;return-1},map:function(b,a,d){var c=[];l.each(b||[],function(e){e=a.call(d,e);if(h.isValue(e))if(h.isArray(e))c.push.apply(c,e);else if(e instanceof u)e.each(function(f){if(l.indexOf(f,c)==-1)c[c.length]=f});else if(l.indexOf(e,c)==-1)c[c.length]=e});return c},inArray:function(b,a){return this.indexOf(b,a)>-1}};var u=function(b){this._items=!h.isValue(b)?[]:h.isArray(b)?b:[b]};u.prototype={each:function(b,a){l.each.call(l,this._items,b,a);return this},
map:function(b,a){return new this.constructor(l.map(this._items,b,a))},size:function(){return this._items.length},filter:function(b,a){var d=[];this.each(function(c){if(b.call(a||this,c))d[d.length]=c});return new this.constructor(d)},item:function(b){return new this.constructor([this._items[b]])}};n={each:function(b,a,d){b=b||{};for(var c in b)if(b.hasOwnProperty(c))if(a.call(d||b,c,b[c],b)===false)break},keys:function(b){var a=[];n.each(b,function(d){a[a.length]=d});return a},values:function(b){var a=
[];n.each(b,function(d,c){a[a.length]=c});return a}};var v=function(){var b=window.navigator,a=b.userAgent.toLowerCase();b=b.platform.toLowerCase();var d=/KHTML/.test(a)||/webkit/i.test(a),c=/opera/i.test(a),e=/(msie) ([\w.]+)/.exec(a);e=e&&e[1]&&e[2]?parseFloat(e[2]):false;return{webkit:d,ie:e,opera:c,gecko:!d&&!c&&!e&&/Gecko/i.test(a),win:b?/win/.test(b):/win/.test(a),mac:b?/mac/.test(b):/mac/.test(a),support:{fixed:!e||e>7&&document.documentMode>6}}}(),x=function(b,a,d){d=d||F;d.body?b.call(F,
a):setTimeout(function(){x(b,a,d)},13)},t=function(b,a,d){b=b||{};a=a||{};if(a.hasOwnProperty)for(var c in a)if(a.hasOwnProperty(c)&&(!b[c]||d))b[c]=a[c];return b},w=function(b){var a=this._doc=b.doc,d=h.isString(b.before)?a.getElementById(b.before):b.before;this._head=a.getElementsByTagName("head")[0];this._before=d||b.before};w.prototype={script:function(b,a){var d=this._create("script",{type:"text/javascript",asyng:true,src:b});this._insert(d);a||setTimeout(function(){d.src=null;d.parentNode&&
d.parentNode.removeChild(d)},1E4);return this},css:function(b,a){a=a||function(){};var d=this._create("link",{type:"text/css",rel:"stylesheet",href:b}),c,e=0,f=this._doc.styleSheets;this._insert(d);if(v.ie)d.onreadystatechange=function(){var g=this.readyState;if(g==="loaded"||g==="complete"){this.onreadystatechange=null;a(d)}};else if(v.webkit){b=d.href;c=setInterval(function(){for(var g=0,j=f.length;g<j;g++)if(f[g].href==b){clearInterval(c);a(d);break}if(++e==100){clearInterval(c);a(d)}},50)}else h.isFunction(a)&&
setTimeout(a,80);return this},_create:function(b,a){var d=this._doc.createElement(b);n.each(a,function(c,e){d[c]=e});return d},_insert:function(b){this._refresh();var a=this._before;a&&!h.isString(a)?a.parentNode.insertBefore(b,a):this._head.appendChild(b)},_refresh:function(){var b=this._doc,a=this._before;if(!this._head)this._head=b.getElementsByTagName("head")[0];if(h.isString(a))this._before=b.getElementById(a)||a}};var p=[],D={},s={},E=function(){for(var b,a=0,d,c,e;a<p.length;){c=p[a].req;e=
c.length;for(d=b=0;d<e;d++)s[c[d].name]&&b++;h.isFunction(p[a].onProgress)&&p[a].onProgress(b/e);if(b==e){b=G(p[a].config);b.use=B(p[a].config,b.Get);for(d=0;d<e;d++)s[c[d].name](b);x(p.splice(a,1)[0].main,b)}else a++}},y=function(b,a){if(!h.isObject(a)){a=b;b={}}a.modules=a.modules||{};n.each(a.modules,function(d,c){if(h.isArray(c))c={requires:c};if(!c.path)c.path=d+(c.type==m?".css":".js");c.name=d;a.modules[d]=c});n.each(a,function(d,c){if(h.isObject(c)&&d!="win"&&d!="doc"&&c.hasOwnProperty){h.isObject(b[d])||
(b[d]={});t(b[d],c,true)}else b[d]=c});return b};window.jet=function(b){var a=y(H);a=y(a,b&&b.win?b.win.jet_Config:window.jet_Config);a=y(a,b);var d=a.base;a.base=d.substr(d.length-1,1)=="/"?d:d+"/";a.minify=h.isBoolean(a.minify)?a.minify:false;a.loadCss=h.isBoolean(a.loadCss)?a.loadCss:true;a.win=a.win||window;a.doc=a.doc||a.win.document;d=new w(a);a=B(a,d);h.isFunction(b)&&a(b);return{use:a}};jet.add=function(b,a){s[b]=a;E()}}();
/**
 * @module log
 * @requires jet
 * 
 * Copyright (c) 2011, Juan Ignacio Dopazo. All rights reserved.
 * Code licensed under the BSD License
 * https://github.com/juandopazo/jet/blob/master/LICENSE.md
*/
jet.add("log",function(c){if(!jet.Log)jet.Log={};var a=jet.Log;if(!a.errors)a.errors=[];if(!a.warnings)a.warnings=[];if(!a.logs)a.logs=[];c.add({error:function(b){a.errors.push(b)},warning:function(b){a.warnings.push(b)},log:function(b){a.logs.push(b)}})});
/**
 * @module oop
 * @requires 
 * 
 * Copyright (c) 2011, Juan Ignacio Dopazo. All rights reserved.
 * Code licensed under the BSD License
 * https://github.com/juandopazo/jet/blob/master/LICENSE.md
*/
jet.add("oop",function(c){var k=Object.prototype,i=c.Array,j=c.Lang,l=function(a){var b=function(){};b.prototype=a;return new b};c.extend=function(a,b,f,d){if(!b||!a)c.error("extend failed, verify dependencies");var e=b.prototype,g=l(e);a.prototype=g;g.constructor=a;a.superclass=e;if(b!=Object&&e.constructor==k.constructor)e.constructor=b;f&&c.mix(g,f,true);d&&c.mix(a,d,true);return a};c.clone=function(a,b){var f;if(j.isArray(a)){f=[].concat(a);b&&i.each(f,function(d,e){f[e]=b?c.clone(d,b):d})}else if(a.hasOwnProperty&&
j.isObject(a,true)){f={};c.Hash.each(a,function(d,e){f[d]=b?c.clone(e,b):e})}else f=a;return f};var h=c.Class=function a(){for(var b=arguments,f=this._classes=[],d=this.constructor;d!==a;){f.unshift(d);d=d.superclass.constructor}i.each(f,function(e){i.each(e.EXTS||[],function(g){g.apply(this,b)},this);e.prototype.hasOwnProperty("initializer")&&e.prototype.initializer.apply(this,b)},this)};c.mix(h,{NAME:"Class",toString:function(){return"class "+h.NAME},create:function(a,b,f,d,e){function g(){g.superclass.constructor.apply(this,
arguments)}c.extend(g,b||h,e,d);c.mix(g,{NAME:a,inherit:function(m,n,o,p){return h.create(m,g,n,o,p)},mixin:function(){return h.mixin(g,Array.prototype.slice.call(arguments))},toString:function(){return"class "+g.NAME}},true);return h.mixin(g,f||[])},mixin:function(a,b){if(!a.EXTS)a.EXTS=[];a.EXTS.push.apply(a.EXTS,b);i.each(b,function(f){c.mix(a.prototype,f.prototype);c.Hash.each(f,function(d,e){if(a[d])c.Lang.isObject(a[d])&&c.Lang.isObject(e)&&c.mix(a[d],e);else a[d]=e})});return a}},true)});
/**
 * @module node
 * @requires oop
 * 
 * Copyright (c) 2011, Juan Ignacio Dopazo. All rights reserved.
 * Code licensed under the BSD License
 * https://github.com/juandopazo/jet/blob/master/LICENSE.md
*/
jet.add("node",function(f){function t(a){this._handlers=a||[]}function r(a){return RegExp("(^|\\s)"+a+"(\\s|$)")}function n(a,b){var c=0,d;b=b||f.context;a=h.isValue(a)?a:[];if(h.isArray(a._nodes))a=a._nodes;else if(h.isString(a))a=[b.createElement(a)];else if(a.nodeType||a.body||a.navigator)a=[a];else if(h.isArray(a))for(;c<a.length;)if(!a[c]||!(a[c].nodeType||a[c].body||a[c].navigator))a.splice(c,1);else c++;else if(h.isNumber(a.length)){d=[];for(c=0;c<a.length;c++)d[c]=a[c];a=d}else f.error("Wrong argument for NodeList");
this._nodes=this._items=a}var h=f.Lang,u=f.Hash,m=f.Array,k=function(){var a={},b=function(d){b=d.detachEvent?function(g){var e,i,j;for(e in a)if(a.hasOwnProperty(e)){i=a[e];for(j=0;j<i.length;)if(i[j].obj==g){i[j].obj.detachEvent("on"+e,i[j].fn);i.splice(j,1)}else j++}}:function(g){var e,i,j;for(e in a)if(a.hasOwnProperty(e)){i=a[e];for(j=0;j<i.length;)if(i[j].obj==g){i[j].obj.removeEventListener(e,i[j].fn,false);i.splice(j,1)}else j++}};b(d)},c=function(d){a[d]||(a[d]=[]);return a[d]};return{add:function(d,
g,e){if(d.nodeType){g=c(g);g[g.length]={obj:d,fn:e}}},remove:function(d,g,e){m.remove(c(g),{obj:d,fn:e})},clear:b,flush:function(){for(var d in a)a.hasOwnProperty(d)&&b(d)}}}(),o=function(a,b,c,d){if(a.addEventListener)o=function(g,e,i,j){if(j)i=f.bind(i,j);g.addEventListener(e,i,false);k.add(g,e,i);return{obj:g,type:e,fn:i}};else if(a.attachEvent)o=function(g,e,i,j){g.attachEvent("on"+e,function(l){l.target=l.srcElement;l.preventDefault=function(){l.returnValue=false};l.stopPropagation=function(){l.cancelBubble=
true};i.call(j||g,l)});k.add(g,e,i);return{obj:g,type:e,fn:i}};return o(a,b,c,d)},p=function(a,b,c){if(a.removeEventListener)p=function(d,g,e){d.removeEventListener(g,e,false);k.remove(d,g,e)};else if(a.detachEvent)p=function(d,g,e){d.detachEvent("on"+g,e);k.remove(d,g,e)};p(a,b,c)};t.prototype={detach:function(){for(var a=this._handlers,b=0,c=a.length;b<c;b++)p(a[b].obj,a[b].type,a[b].fn);this._handlers=[]}};var s={getWindowFromDocument:function(a){a=a||f.context;return a.defaultView||a.parentWindow||
f.win},scrollLeft:function(a){if(h.isValue(a))f.win.scrollTo(a,this.scrollTop());else{a=f.context;var b=a.defaultView;return Math.max(a.documentElement.scrollLeft,a.body.scrollLeft,b?b.pageXOffset:0)}return this},scrollTop:function(a){if(h.isValue(a))f.win.scrollTo(this.scrollTop(),a);else{a=f.context;var b=a.defaultView;return Math.max(a.documentElement.scrollTop,a.body.scrollTop,b?b.pageYOffset:0)}return this},screenSize:function(a){var b=a?a.document:f.config.doc;a=b.documentElement;b=b.body;return{height:a.clientHeight||
f.win.innerHeight||b.clientHeight,width:a.clientWidth||f.win.innerWidth||b.clientWidth}},pageSize:function(a){a=a||f.win;var b=a.document,c=a.innerWidth;a=a.innerHeight;var d=b.compatMode!="CSS1Compat"?b.body:b.documentElement;if(b.compatMode&&!f.UA.opera){c=d.clientWidth;a=d.clientHeight}return{width:Math.max(d.scrollWidth,c),height:Math.max(d.scrollHeight,a)}}},v=function(a){var b=this._nodes[0];(b.ownerDocument||b).body?a.call(this):setTimeout(function(){v(a)},13);return this};h=f.Lang;m=f.Array;
var w=Array.prototype.slice,y=/^(?:body|html)$/i;f.extend(n,f.ArrayList,{hide:function(){return this.each(function(a){var b=a.style.display;if(!a.JET_oDisplay&&b!="none")a.JET_oDisplay=b;a.style.display="none"})},show:function(){return this.each(function(a){a.style.display=a.JET_oDisplay||""})},toggle:function(a){return this.each(function(b){var c=b.style;b=b.LIB_oDisplay||"";c.display=h.isBoolean(a)?a?b:"none":c.display!="none"?"none":b?b:""})},hasClass:function(a){return r(a).test(this._nodes[0].className)},
removeClass:function(){var a=arguments;return this.each(function(b){m.each(w.call(a),function(c){b.className=h.trim(b.className.replace(r(c)," "))})})},addClass:function(){var a=arguments;return this.each(function(b){m.each(w.call(a),function(c){r(c).test(b.className)||(b.className+=(b.className?" ":"")+c)})})},toggleClass:function(a,b){return this.each(function(c){c=f(c);h.isBoolean(b)||(b=!c.hasClass(a));c[b?"addClass":"removeClass"](a)})},setClass:function(a){return this.each(function(b){b.className=
a})},offset:function(a,b){if(h.isNumber(a)||h.isNumber(b))return this.each(function(q){q=f(q);var x=q.offsetParent().offset();h.isNumber(a)&&q.css("left",a-x.left+"px");h.isNumber(b)&&q.css("top",b-x.top+"px")});else{var c=this._nodes[0],d={left:0,top:0,width:c.offsetWidth,height:c.offsetHeight},g=c.ownerDocument;try{if(c.getBoundingClientRect){var e=c.getBoundingClientRect(),i=g.body,j=g.documentElement;d.left=e.left+s.scrollLeft()-(j.clientLeft||i.clientLeft||0);d.top=e.top+s.scrollTop()-(j.clientTop||
i.clientTop||0)}else if(c.offsetParent){do{d.left+=c.offsetLeft;d.top+=c.offsetTop;c=c.offsetParent}while(c)}}catch(l){}return d}},offsetParent:function(){return this.map(function(a){for(a=a.offsetParent||document.body;a&&!y.test(a.nodeName)&&f(a).css("position")==="static";)a=a.offsetParent;return a})},width:function(a){if(h.isValue(a)){if(h.isNumber(a)&&a<0)a=0;a=h.isString(a)?a:a+"px";return this.each(function(b){b.style.width=a})}return this._nodes[0].offsetWidth},height:function(a){if(h.isValue(a)){if(h.isNumber(a)&&
a<0)a=0;a=h.isString(a)?a:a+"px";return this.each(function(b){b.style.height=a})}return this._nodes[0].offsetHeight},clone:function(a){a=h.isValue(a)?a:true;return this.map(function(b){return b.cloneNode(a)})},append:function(a){a=f(a);return this.each(function(b){a.each(function(c){b.appendChild(c)})})},appendTo:function(a){var b=f(a)._nodes[0];return this.each(function(c){b.appendChild(c)})},prepend:function(a){a=f(a);return this.each(function(b){a.each(function(c){b.firstChild?b.insertBefore(c,
b.firstChild):b.appendChild(c)})})},prependTo:function(a){a=f(a)._nodes[0];return this.each(function(b){a.firstChild?a.insertBefore(b,a.firstChild):a.appendChild(b)})},insertBefore:function(a){a=f(a)._nodes[0];return this.each(function(b){a.parentNode.insertBefore(b,a)})},inDoc:function(){for(var a=this.parent();a._nodes[0];){if(a._nodes[0].nodeName.toLowerCase()=="html")return true;a=a.parent()}return false},parent:function(){return this.map(function(a){if(a.parentNode)return a.parentNode})},ancestor:function(a){return this.map(function(b){for(b=
b;b;){if(a(b))break;b=b.parentNode}return b})},first:function(){return this.map(function(a){if(a=f(a).children(0)._nodes[0])return a})},next:function(){return this.map(function(a){do a=a.nextSibling;while(a&&a.nodeType==1);return a})},previous:function(){return this.map(function(a){do a=a.previousSibling;while(a&&a.nodeType==3);return a})},last:function(){return this.map(function(a){for(var b=f(a).children(),c=-1;b[++c];)a=b[c];return a})},html:function(a){return h.isValue(a)?this.each(function(b){b.innerHTML=
a}):this._nodes[0].innerHTML},attr:function(a,b){a=a||{};var c={};if(h.isObject(a))c=a;else if(h.isValue(b))c[a]=b;else return this._nodes[0][a];return this.each(function(d){u.each(c,function(g,e){d[g]=e})})},css:function(a,b){var c={};if(h.isObject(a))c=a;else if(h.isValue(b))c[a]=b;else return f(this._nodes[0]).currentStyle()[a];return this.each(function(d){u.each(c,function(g,e){if(g=="opacity"&&f.UA.ie)d.style.filter="alpha(opacity="+Math.ceil(e*100)+")";else{if(h.isNumber(e)&&g!="zIndex"&&g!=
"zoom"&&g!="opacity")e+="px";d.style[g]=e}})})},find:function(a){return this.map(function(b){return f(a,b)})},children:function(a){a=!h.isValue(a)?false:h.isString(a)?a.toUpperCase():a;var b=[];this.each(function(c){c=c.childNodes;for(var d=[],g=c.length,e=0;e<g;e++)if(c[e].nodeType!=3)d[d.length]=c[e];if(a!==false){g=d.length;for(e=0;e<g;e++)if(e==a||d[e].nodeName==a)b.push(d[e])}else b.push.apply(b,d)});return new n(b)},on:function(a,b,c){var d=[];this.each(function(g){d.push(o(g,a,b,c))});return new t(d)},
unbind:function(a,b){return this.each(function(c){p(c,a,b)})},unbindAll:function(a){return this.each(function(b){a?f.walkTheDOM(b,k.clear):k.clear(b)})},remove:function(){return this.each(function(a){f.walkTheDOM(a,k.clear);a.parentNode&&a.parentNode.removeChild(a)})},setContent:function(a){this.children().unbindAll(true).remove();return this.html(a)},detach:function(){return this.each(function(a){a.parentNode&&a.parentNode.removeChild(a)})},ownerDoc:function(){return this.map(function(a){return a.ownerDocument})},
contentDoc:function(){return this.map(function(a){if(a.nodeName=="IFRAME")return a.contentDocument||a.contentWindow.document||a.document})},currentStyle:function(){var a=this._nodes[0];return f.win.getComputedStyle?f.win.getComputedStyle(a,null):a.currentStyle?a.currentStyle:a.style},ready:v,link:function(){var a=[];this.each(function(b){a.push(b)});m.each(arguments,function(b){f(b).each(function(c){a.push(c)})});return new n(a)},blur:function(){return this.each(function(a){try{a.blur()}catch(b){f.error(b)}})},
focus:function(){return this.each(function(a){try{a.focus()}catch(b){f.error(b)}})},value:function(a){return this.attr("value",a)}});m.each(["Left","Top"],function(a){n.prototype["offset"+a]=function(b){return h.isValue(b)?a=="Left"?this.offset(b):this.offset(null,b):this.offset()[a.toLowerCase()]}});f.add({NodeList:n,DOM:s,pxToFloat:function(a){return h.isNumber(parseFloat(a))?parseFloat(a):h.isString(a)?parseFloat(a.substr(0,a.length-2)):a}});o(f.win,"unload",k.flush)});
/**
 * @module base
 * @requires node
 * 
 * Copyright (c) 2011, Juan Ignacio Dopazo. All rights reserved.
 * Code licensed under the BSD License
 * https://github.com/juandopazo/jet/blob/master/LICENSE.md
*/
jet.add("base",function(e){function v(a,b,c,d){var f=this;this.type=a;this.target=b;this.preventDefault=function(){c&&c()};m.each(d||{},function(i,g){h.isValue(f[i])||(f[i]=g)})}var m=e.Hash,h=e.Lang,j=e.Array,s=Array.prototype.slice,n=e.Class;e.EventTarget=n.create("EventTarget",n,[],{},{initializer:function(){this._events={}},on:function(a,b,c){var d=this._events,f=false;d[a]||(d[a]=[]);if(a.indexOf("~ONCE~")>-1){f=true;a=a.substr(6)}if(h.isObject(b))d[a].push({fn:b,o:c||this,once:f});return this},
once:function(a,b,c){return this.on("~ONCE~"*a,b,c)},after:function(a,b,c){return this.on("after"+a.charAt(0).toUpperCase()+a.substr(1),b,c)},unbind:function(a,b){if(a)j.remove(b,this._events[a]||[]);else this._events={};return this},fire:function(a,b){var c=this._events,d=c[a]||[],f=true;if(c["*"])d=d.concat(c["*"]);var i=d.length,g,k=new v(a,this,function(){f=false},b);for(c=0;c<i;c++){g=d[c].fn;if(h.isFunction(g))g.call(d[c].o,k);else if(h.isObject(g)&&g.handleEvent)g.handleEvent.call(d[c].o||
g,k);if(d[c].once){j.remove(d,d[c]);c--}}return f}});e.Attribute=n.create("Attribute",e.EventTarget,[],{},{initializer:function(a){this._state=a||{};this._stateConf={};j.each(this._classes,function(b){b.ATTRS&&this.addAttrs(b.ATTRS)},this)},addAttr:function(a,b){this._stateConf[a]=b;var c=this._state,d=h.isValue(c[a]);b.readOnly&&d&&delete c[a];if(h.isString(b.setter))b.setter=this[b.setter];if(h.isString(b.getter))b.getter=this[b.getter];if(d&&b.setter)c[a]=b.setter.call(this,c[a]);return this},
_set:function(a,b){var c=this._stateConf,d=this._state;c[a]=c[a]||{};var f=c[a],i=d[a],g;if(!f.readOnly){if(!f.validator||f.validator.call(this,b)){b=f.setter?f.setter.call(this,b):b;if(!h.isValue(d[a])&&f.value)d[a]=i=f.value;g={newVal:b,prevVal:i};if(b!==i&&this.fire(a+"Change",g)){d[a]=b;this.fire("after"+h.capitalize(a)+"Change",g)}}if(f.writeOnce&&!f.readOnly)c[a].readOnly=true}return this},get:function(a){var b=this._stateConf,c=this._state;b[a]=b[a]||{};var d=b[a];if(d.writeOnce&&!d.readOnly)b[a].readOnly=
true;if(!h.isValue(c[a]))c[a]=d.value;return d.getter?d.getter.call(this,c[a],a):c[a]},set:function(a,b){h.isObject(a)?m.each(a,this._set,this):this._set(a,b);return this},unset:function(a){delete this._state[a];return this},addAttrs:function(a){m.each(a,this.addAttr,this);return this},getAttrs:function(){var a={},b=this;m.each(this._state,function(c){a[c]=b.get(c)});return a}});e.Base=n.create("Base",e.Attribute,[],{ATTRS:{on:{writeOnce:true,getter:function(a){return a||{}}}}},{initializer:function(a){function b(c,
d){this.on(c,h.isString(d)?this[d]:d)}a=a||{};j.each(this._classes,function(c){j.each(c.EXTS,function(d){m.each(d.EVENTS,b,this)},this);m.each(c.EVENTS,b,this)},this);m.each(a.on,b,this)}});e.Base.create=function(a,b,c,d,f){return n.create(a,b||e.Base,c,d,f)};e.Utility=n.create("utility",e.Base,[],{CSS_PREFIX:"jet",ATTRS:{cssPrefix:{getter:function(a){return a||e.Utility.CSS_PREFIX},writeOnce:true}}},{initializer:function(){this._handlers=[e(this.get("win")).on(t,this.destroy,this)]},destroy:function(){this.fire(u)&&
j.each(this._handlers,function(a){a.detach()})},getClassName:function(){return[this.get(p),this.constructor.NAME].concat(s.call(arguments)).join("-")}});var p="classPrefix",t="unload",u="destroy";if(!jet.Widget)jet.Widget={};if(!h.isNumber(jet.Widget._uid))jet.Widget._uid=-1;if(!jet.Widget._instances)jet.Widget._instances={};e.Widget=n.create("widget",e.Base,[],{CSS_PREFIX:"jet",NAME:"widget",DOM_EVENTS:{click:1,keypress:1,mousedown:1,mouseup:1,mouseover:1,mouseout:1},ATTRS:{srcNode:{value:e(e.context.body),
setter:e},classPrefix:{writeOnce:true,getter:function(a){return a||e.Widget.CSS_PREFIX}},rendered:{value:false},boundingBox:{setter:e},contentBox:{setter:e},width:{validator:h.isNumber},height:{validator:h.isNumber},id:{},visible:{value:true,validator:h.isBoolean},disabled:{value:false,validator:h.isBoolean}},HTML_PARSER:{contentBox:function(){var a=this.get("boundingBox");if(a&&this.CONTENT_TEMPLATE)return a.first()}},getByNode:function(a){a=e(a)._nodes[0];for(var b=a.ownerDocument.documentElement;a&&
a!=b;){if(a.id&&jet.Widget._instances[a.id])return jet.Widget._instances[a.id];a=a.parentNode}return null}},{BOUNDING_TEMPLATE:"<div/>",CONTENT_TEMPLATE:"<div/>",_domEventProxy:function(a){this.fire(a.type,{domEvent:a})},show:function(){return this.set("visible",true)},hide:function(){return this.set("visible",false)},enable:function(){return this.set("enabled",true)},disable:function(){return this.set("enabled",false)},focus:function(){return this.set("focused",true)},blur:function(){return this.set("focused",
false)},render:function(a){if(!this.get("rendered")){var b=this,c=this.get("boundingBox"),d=this.get("contentBox"),f=this.get("srcNode"),i,g=this.get(p),k=[].concat(this._classes);m.each(e.Widget.DOM_EVENTS,function(l,o){o&&b._handlers.push(c.on(l,b._domEventProxy,b))});if(a){f=a;b.set("srcNode",a)}if(this.constructor==e.Widget)k=[e.Widget];else k.splice(0,4);j.each(["width","height"],function(l){var o=b.get(l);h.isNumber(o)&&c[l](o);b.after(l+"Change",function(q){newVal=h.isNumber(q.newVal)?q.newVal:
"";b.get("boundingBox")[l](q.newVal)})});j.each(k,function(l){i=[g,l.NAME].join("-");c.addClass(i);d.addClass([i,"content"].join("-"))});c._nodes[0]!=d._nodes[0]&&c.append(d.css("visibility","inherit"));c.attr("id")||c.attr("id",this.get("id"));this._toggleVisibility({newVal:this.get("visible")});this._toggleDisabled({newVal:this.get("disabled")});if(this.fire("render")){j.each(["renderUI","bindUI","syncUI"],function(l){j.each(k,function(o){o.prototype.hasOwnProperty(l)&&o.prototype[l].call(b,c,d)})});
c.inDoc()||c.appendTo(f);this.set("rendered",true).focus();setTimeout(function(){b.fire("afterRender")},0)}}return this},destroy:function(){if(this.fire(u)){j.each(this._classes,function(a){a.prototype.hasOwnProperty("destructor")&&a.prototype.destructor.call(this)},this);j.each(this._handlers,function(a){a.detach&&a.detach()});this.get("boundingBox").unbindAll(true).remove()}},_parseHTML:function(){var a=this,b=this.get("boundingBox");b._nodes[0]&&b.inDoc()&&j.each(this._classes,function(c){m.each(c.HTML_PARSER||
{},function(d,f){var i=f.call(a,b);if(h.isValue(i)&&(!(i instanceof e.NodeList)||i._nodes[0]))a.set(d,i)})})},_toggleVisibility:function(a){this.get("boundingBox").toggleClass(this.getClassName("hidden"),!a.newVal)},_toggleDisabled:function(a){this.get("boundingBox").toggleClass(this.getClassName("disabled"),a.newVal)},_widgetIdChange:function(a){this.get("boundingBox").attr("id",a.newVal);jet.Widget._instances[a.newVal]=this;delete jet.Widget._instances[a.prevVal]},initializer:function(){this._handlers=
[e(e.config.win).on(t,this.destroy,this)];this._uid=++jet.Widget._uid;var a=this.get("id");if(!a){a=this.getClassName(this._uid);this.set("id",a)}this.after("idChange",this._widgetIdChange);jet.Widget._instances[a]=this;this.get("boundingBox")||this.set("boundingBox",this.BOUNDING_TEMPLATE);this.get("contentBox")||this.set("contentBox",this.CONTENT_TEMPLATE||this.get("boundingBox"));this.after("visibleChange",this._toggleVisibility);this.after("disabledChange",this._toggleDisabled);this._parseHTML()},
getClassName:function(){return[this.get(p),this.constructor.NAME].concat(s.call(arguments)).join("-")}});var r=e.Mouse=n.create("mouse",e.Utility,[],{ATTRS:{frequency:{value:20},tracking:{value:false,validator:h.isBoolean},capturing:{value:false,validator:h.isBoolean},shields:{readOnly:true,getter:"_buildShim"},shim:{value:false,validator:h.isBoolean},prevX:{value:0},prevY:{value:0}}},{_buildShim:function(){if(!r.shim){var a=this.get("pageSize");r.shim=e("<iframe/>").attr({frameborder:"0",src:"javascript:;"}).css({opacity:0,
position:"absolute",top:"0px",left:"0px",width:a.width,height:a.height,border:0,zIndex:2E7}).appendTo(e.config.doc.body).hide()}return r.shim},_onTrackingChange:function(a){var b=this;if(a.newVal){if(!this.get("capturing")){this.get("shim")&&this.shim.show();this.interval=setInterval(function(){var c=b.get("clientX"),d=b.get("clientY");if(b.get("prevX")!=c||b.get("prevY")!=d){b.fire("mousemove",{clientX:c,clientY:d});b.set({prevX:c,prevY:d})}},this.get("frequency"));this.set("capturing",true)}}else{this.shim.hide();
clearInterval(this.interval);this.set("capturing",false)}},_onSelectStart:function(a){this.get("capturing")&&a.preventDefault()},_onMouseMove:function(a){this.set({clientX:a.clientX,clientY:a.clientY})},_onMouseUp:function(){this.set("tracking",false).fire("mouseup",{clientX:this.get("clientX"),clientY:this.get("clientY")})},initializer:function(){this.set("pageSize",e.DOM.pageSize());var a=this.shim=this._buildShim();this.after("trackingChange",this._onTrackingChange);var b=e(a._nodes[0].contentWindow.document);
b.find("body").css({margin:0,padding:0});b.on("mousemove",this._onMouseMove,this);b.on("mouseup",this._onMouseUp,this);b=e(e.config.doc);b.on("selectstart",this._onSelectStart,this);b.on("mousemove",this._onMouseMove,this);b.on("mouseup",this._onMouseUp,this);this.on("destroy",a.unbindAll,a)},down:function(){return this.set("tracking",true)},up:function(){return this.set("tracking",false)}});(function(){var a=new e.EventTarget,b,c,d,f=e.config.win,i=function(){var g=e.DOM.scrollLeft(),k=e.DOM.scrollTop();
if(g!=c||k!=d)a.fire("scroll",{scrollLeft:g,scrollTop:k});else{clearInterval(b);b=null}c=g;d=k};e(e.config.win).on("scroll",function(){b||(b=setInterval(i,50))});j.each(["on","once","fire"],function(g){e[g]=e.bind(a[g],a)});j.each(["load","unload"],function(g){e(f).on(g,function(){a.fire(g)})});e(f).on("resize",function(){a.fire("resize")})})()});
