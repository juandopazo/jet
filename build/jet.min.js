/*
 Copyright (c) 2010, Juan Ignacio Dopazo. All rights reserved.
 Code licensed under the BSD License
 http://code.google.com/p/jet-js/wiki/Licence
*/
(function(){var D=location.protocol+"//jet-js.googlecode.com/svn/trunk/build/",j=window,n=document,q=Array.prototype,E=String.prototype,F=q.slice,G=Object.prototype.toString,H={ua:true,log:true,node:["log","ua"],xsl:["node"],swf:true,spbar:["node"],json:["node"],cookie:["node"],sizzle:["node"],base:["node"],io:["json"],"io-xdr":["node","swf","io"],"io-xsl":["io"],history:["base","json"],tabs:["base"],resize:["base",{name:"resize-css",type:"css",path:"resize.css",beacon:{name:"borderLeftStyle",
value:"solid"}}],button:["base",{name:"button-css",type:"css",path:"button.css",beacon:{name:"borderBottomStyle",value:"solid"}}],container:["base",{name:"container-css",type:"css",path:"container.css",beacon:{name:"borderRightStyle",value:"solid"}}],progressbar:["base",{name:"progressbar-css",type:"css",path:"progressbar.css",beacon:{name:"cursor",value:"pointer"}}],dragdrop:["base"],imageloader:["base"],anim:["base"],datasource:["base","io"],datatable:["datasource",
{name:"datatable-css",type:"css",path:"datatable.css",beacon:{name:"borderTopStyle",value:"solid"}}],treeview:["base"],vector:["anim"]},i=function(){var c={number:"number",string:"string",undefined:"undefined","[object Object]":"hash","[object Function]":"function","[object Array]":"array","boolean":"boolean"},d=function(b){return c[typeof b]||c[G.call(b)]||(b?"object":"null")},e=function(b){return/^s*function[^{]+{s*[native code]s*}s*$"/.test(b)};return{isNumber:function(b){return d(b)===
"number"&&isFinite(b)},isString:function(b){return d(b)==="string"},isArray:function(b){return d(b)==="array"},isHash:function(b){return d(b)==="hash"},isFunction:function(b){return d(b)==="function"},isObject:function(b,a){var f=typeof b;return b&&(f==="object"||!a&&(f==="function"||i.isFunction(b)))||false},isBoolean:function(b){return typeof b=="boolean"},isUndefined:function(b){return typeof b=="undefined"},type:d,isNative:e,isValue:function(b){var a=d(b);switch(a){case "number":return isFinite(b);
case "null":case "undefined":return false;case "boolean":return true;default:return!!a}},is:function(b){return b instanceof this},trim:e(E.trim)?function(b){return b.trim()}:function(b){b=b.replace(/^\s\s*/,"");for(var a=/\s/,f=b.length;a.test(b.charAt(--f)););return b.slice(0,f+1)},random:function(b){b=Math.random()*b;return b===0?0:Math.ceil(b)-1}}}(),k,l,r=function(c){var d;if(i.isHash(c)){d={};l.each(c,function(e,b){d[e]=r(b)})}else if(i.isArray(c)){d=[];k.each(c,function(e){d[d.length]=r(e)})}else d=
c;return d};i.clone=r;k={each:i.isNative(q.forEach)?function(c,d,e){c.forEach(d,e)}:function(c,d,e){c=c||[];var b,a=c.length;for(b=0;b<a;b++)d.call(e,c[b],b,c)},remove:function(c,d){for(var e=0,b=d.length;e<b;)if(d[e]==c)d.splice(e,1);else e++;return d},indexOf:i.isNative(q.indexOf)?function(c,d){return d.indexOf(c)}:function(c,d){var e,b=d.length;for(e=0;e<b;e+=1)if(d[e]==c)return e;return-1},inArray:function(c,d){return this.indexOf(c,d)>-1}};l={each:function(c,d,e){for(var b in c)if(c.hasOwnProperty(b))if(d.call(e||
c,b,c[b],c)===false)break},keys:function(c){var d=[];l.each(c,function(e){d[d.length]=e});return d},values:function(c){var d=[];l.each(c,function(e,b){d[d.length]=b});return d}};var u=function(c,d,e){var b=n.createElement(c);l.each(d,function(a,f){b[a]=f});l.each(e,function(a,f){b.style[a]=f});return b},v=n.getElementsByTagName("head")[0],x=function(c,d){var e=u("script",{type:"text/javascript",asyng:true,src:c});v.appendChild(e);d||setTimeout(function(){v.removeChild(e)},1E4)},y=function(c){v.appendChild(u("link",
{type:"text/css",rel:"stylesheet",href:c}))},s=function(c,d){n.body?c.call(n,d):setTimeout(function(){s(c,d)},13)},w=function(c,d,e){c=c||{};d=d||{};for(var b in d)if(d.hasOwnProperty(b)&&(!c[b]||e))c[b]=d[b];return c},I=function(){var c=function(a,f){f(a);for(a=a.firstChild;a;){a.nodeType!=3&&c(a,f);a=a.nextSibling}},d=function(a,f){d=f.getElementsByClassName?function(h,g){return g.getElementsByClassName(h)}:function(h,g){var m=[];c(g,function(z){var A=z.className;if(A&&k.indexOf(h,A.split(" "))>
-1)m[m.length]=z});return m};return d(a,f)},e=function(a,f){f=f||e.context;e.context=f.ownerDocument||e.context;if(i.isString(a)){a=e.parseQuery(a,f);a=!i.isValue(a)?new e.NodeList([]):new e.NodeList(a)}else a=new e.NodeList(a);return a},b=function(a){w(e,a,true)};if(j.JSON)e.JSON=j.JSON;b({win:j,context:n,parseQuery:function(a,f){f=f||e.context;var h=a.substr(0,1),g;if(h=="<")if(a.match(/</g).length==1)return f.createElement(a.substr(1,a.length-3));else{h=a.match(/<([a-z]+)>(.+)<\/([a-z]+)>/i);g=
null;if(h.length==4&&h[1]==h[3]){g=f.createElement(h[1]);g.innerHTML=h[2]}else e.error("Wrong element creation string");return g}else return h=="#"?f.getElementById(a.substr(1)):h=="."?d(a.substr(1),f):f.getElementsByTagName(a)},mix:w,add:b,walkTheDOM:c,Lang:i,Array:k,Hash:l,utils:{},Get:{script:x,css:y}});return e},o=[],B={},t={},C=function(){for(var c,d=0,e,b,a;d<o.length;){b=o[d].req;a=b.length;for(e=c=0;e<a;e++)t[b[e].name]&&c++;i.isFunction(o[d].onProgress)&&o[d].onProgress(c/a);if(c==a){c=new I;
for(e=0;e<a;e++)t[b[e].name](c);s(o.splice(d,1)[0].main,c)}else d++}};if(!j.jet){var p;s(function(){p=u("div",{id:"jet-tracker"},{position:"absolute",width:"1px",height:"1px",top:"-1000px",left:"-1000px",visibility:"hidden"});n.body.appendChild(p)});j.jet=function(c){c=c||{};var d=D;if(c.base){d=c.base;d=d.substr(d.length-1,1)=="/"?d:d+"/"}c.minify=i.isBoolean(c.minify)?c.minify:true;c.loadCss=i.isBoolean(c.loadCss)?c.loadCss:false;var e=w(r(H),c.modules||{},true),b=function(a){y(a.fullpath||(a.path?
d+a.path:d+a.fileName+(c.minify?".min.css":".css")));var f=setInterval(function(){if((j.getComputedStyle?j.getComputedStyle(p,null):p.currentStyle?p.currentStyle:{})[a.beacon.name]==a.beacon.value){clearInterval(f);jet().add(a.name,function(){})}},50)};return{use:function(){var a=F.call(arguments),f=0,h=0,g,m;if(k.indexOf("*",a)>-1){for(;h<a.length;)if(i.isString(a[h]))a.splice(h,1);else h++;q.unshift.apply(a,l.keys(e))}else k.indexOf("io",a)==-1&&a.unshift("io");for(;f<a.length-1;){g=
a[f];m=1;if(i.isString(g))if((g=e[g.toLowerCase()])&&i.isArray(g))for(h=g.length-1;h>=0;h--)if(!k.inArray(g[h],a)){a.splice(f,0,g[h]);m=0}f+=m}j.JSON&&k.remove("json",a);for(f=0;f<a.length-1;f++){g=a[f];if(i.isString(g)&&e[g])a[f]=g=i.isHash(e[g])?e[g]:{name:g,path:g+(c.minify?".min.js":".js")};if(g.type=="css"&&!c.loadCss){a.splice(f,1);f--}else if(!(t[g.name]||B[g.fullpath||d+g.path])){if(!g.type||g.type=="js")x(g.fullpath||d+g.path);else g.type=="css"&&s(b,g);B[g.fullpath||
d+g.path]=1}}o.push({main:a.pop(),req:a,onProgress:c.onProgress});C()},add:function(a,f){t[a]=f;C()}}}}})();
jet().add("io",function(f){var l=f.win,u=f.Hash,o=!!l.ActiveXObject,v=!!l.XMLHttpRequest,g=function(a){return new l.ActiveXObject(a)},q=function(a){var b=[];u.each(a,function(d,c){b.push(d+"="+c)});return b.join("&")},n=function(a){var b;try{b=g("Msxml2.DOMDocument.6.0");n=function(e){return e=="xsl"?g("Msxml2.FreeThreadedDOMDocument.6.0"):g("Msxml2.DOMDocument.6.0")}}catch(d){try{b=g("Msxml2.DOMDocument.3.0");n=function(e){return e=="xsl"?g("Msxml2.FreeThreadedDOMDocument.3.0"):g("Msxml2.DOMDocument.3.0")}}catch(c){}}return n(a)},
m=function(){var a=location.host;if((location.protocol=="file:"||a=="localhost"||a=="127.0.0.1")&&o)m=function(){return g("Microsoft.XMLHTTP")};else if(v)m=function(){return new XMLHttpRequest};else if(o)m=function(){return g("Microsoft.XMLHTTP")};return m()},r=function(a,b,d){var c=null;if(a.responseXML)c=a.responseXML;else if(l.DOMParser){c=new l.DOMParser;c=c.parseFromString(a.responseText||a,"text/xml")}else if(o){c=n(b);c.async=false;c.loadXML(a.responseText||a);c.parseError.errorCode!==0&&d("Bad status",
c.parseError)}else d(0,{reason:"Can't find a suitable XML parser",srcText:a});return c},s=function(a,b,d){b=b||a.getResponseHeader("Content-type");switch(b){case "application/xml":case "xml":case "xsl":return r(a,b,d);case "json":try{return f.JSON.parse(a.responseText)}catch(c){f.error(c)}break;default:return a.responseText}};if(!jet.IO)jet.IO={};if(!jet.IO.jsonpCallbacks)jet.IO.jsonpCallbacks=[];f.add({ajax:function(a){var b=m(),d=a.success,c=null,e=a.dataType,h=a.timeout||1E4,i=a.method||"GET",
p=a.async||true,t=a.complete||function(){},w=function(){d&&d.apply(f,arguments);t.apply(f,arguments)},j=function(x,y,z){a.error&&a.error(x,y,z);t.apply(f,arguments)},k=a.url;if(b){if(e&&(e==="xml"||e==="xsl")&&b.overrideMimeType)b.overrideMimeType("text/xml");if(k){if(k.substr(k.length-1)!="?")k+="?";if(a.data)k+=q(a.data);if(p===true)b.onreadystatechange=function(){if(b.readyState===4)if(b.status===404)j("File not found",b.status,b);else if(b.status===408)j("timeout",b.status,b);else b.status===
200||b.responseText||b.responseXML?w(s(b,e,j),b):j("Bad status",b.status,b)};try{b.open(i,k,p);b.send(null)}catch(A){j("Bad status",404,b)}if(p===false)c=s(b,e,j);else setTimeout(function(){if(b.readyState!==4){b.abort();j("timeout",408,b)}},h)}}return c||f},jsonp:function(a){a=a||{};var b=a.jsonCallbackParam||"p",d=jet.IO.jsonpCallbacks,c=d.length,e=false,h=a.url;if(h){d[c]=function(i){e=true;a.success&&a.success(i);a.complete&&a.complete(i)};if(h.substr(h.length-1)!="?")h+="?";if(!a.data)a.data=
{};settings.data[b]="jet.IO.jsonpCallbacks["+c+"]";f.Get.script(h+q(a.data));setTimeout(function(){if(!e){var i={message:"Request failed",reason:"Timeout"};a.error&&a.error(i);a.complete&&a.complete(i)}},a.timeout||1E4)}}});f.IO={utils:{parseXML:r}}});
jet().add("log",function(c){if(!jet.Log)jet.Log={};var a=jet.Log;if(!a.errors)a.errors=[];if(!a.warnings)a.warnings=[];if(!a.logs)a.logs=[];c.add({error:function(b){a.errors.push(b)},warning:function(b){a.warnings.push(b)},log:function(b){a.logs.push(b)}})});
jet().add("node",function(f){var h=f.Lang,q=f.Hash,l=f.Array,r=Array.prototype.slice,m=function(){var a={},b=function(d){b=d.detachEvent?function(g){var e,i,j;for(e in a)if(a.hasOwnProperty(e)){i=a[e];for(j=0;j<i.length;)if(i[j].obj==g){i[j].obj.detachEvent("on"+e,i[j].fn);i.splice(j,1)}else j++}}:function(g){var e,i,j;for(e in a)if(a.hasOwnProperty(e)){i=a[e];for(j=0;j<i.length;)if(i[j].obj==g){i[j].obj.removeEventListener(e,i[j].fn,false);i.splice(j,1)}else j++}};b(d)},c=function(d){a[d]||(a[d]=
[]);return a[d]};return{add:function(d,g,e){if(d.nodeType){g=c(g);g[g.length]={obj:d,fn:e}}},remove:function(d,g,e){l.remove(c(g),{obj:d,fn:e})},clear:b,flush:function(){for(var d in a)a.hasOwnProperty(d)&&b(d)}}}(),n=function(a,b,c){if(a.addEventListener)n=function(d,g,e){d.addEventListener(g,e,false);m.add(d,g,e)};else if(a.attachEvent)n=function(d,g,e){d.attachEvent("on"+g,function(i){i.target=i.srcElement;i.preventDefault=function(){i.returnValue=false};i.stopPropagation=function(){i.cancelBubble=
true};e.call(event.srcElement,i)});m.add(d,g,e)};n(a,b,c)},o=function(a,b,c){if(a.removeEventListener)o=function(d,g,e){d.removeEventListener(g,e,false);m.remove(d,g,e)};else if(a.detachEvent)o=function(d,g,e){d.detachEvent("on"+g,e);m.remove(d,g,e)};o(a,b,c)},p={getWindowFromDocument:function(a){a=a||f.context;return a.defaultView||a.parentWindow||f.win},scrollLeft:function(a){if(h.isValue(a))f.win.scrollTo(a,this.scrollTop());else{a=f.context;var b=a.defaultView;return Math.max(a.documentElement.scrollLeft,
a.body.scrollLeft,b?b.pageXOffset:0)}return this},scrollTop:function(a){if(h.isValue(a))f.win.scrollTo(this.scrollTop(),a);else{a=f.context;var b=a.defaultView;return Math.max(a.documentElement.scrollTop,a.body.scrollTop,b?b.pageYOffset:0)}return this},screenSize:function(){var a=f.context,b=a.documentElement;a=a.body;return{height:b.clientHeight||f.win.innerHeight||a.clientHeight,width:b.clientWidth||f.win.innerWidth||a.clientWidth}},pageSize:function(){var a=f.win,b=f.context,c=a.innerWidth;a=a.innerHeight;
var d=b.compatMode!="CSS1Compat"?b.body:b.documentElement;if(b.compatMode&&!f.UA.opera){c=d.clientWidth;a=d.clientHeight}return{width:Math.max(d.scrollWidth,c),height:Math.max(d.scrollHeight,a)}}},s=function(a){(this[0].ownerDocument||this[0]).body?a.call(this):setTimeout(function(){s(a)},13);return this},k=function(a,b){b=b||f.context;a=h.isValue(a)?a:[];if(k.is(a))return a;if(h.isString(a))a=[b.createElement(a)];else if(a.nodeType||a.body||a.navigator)a=[a];else if(h.isArray(a))for(var c=0;c<a.length;)if(a[c].nodeType||
a[c].body||a[c].navigator)c++;else a.splice(c,1);else if(h.isNumber(a.length)){var d=[];for(c=0;c<a.length;c++)d[c]=a[c];a=d}else f.error("Wrong argument for NodeList");d=a.length;for(c=0;c<d;c++)this[c]=a[c];this.length=d};k.prototype={each:function(a){var b,c=this.length;for(b=0;b<c;b++)a.call(this[b],this[b],b);return this},hide:function(){return this.each(function(a){var b=a.style.display;if(!a.JET_oDisplay&&b!="none")a.JET_oDisplay=b;a.style.display="none"})},show:function(){return this.each(function(a){a.style.display=
a.JET_oDisplay||""})},toggle:function(){return this.each(function(a){var b=a.style;a=a.LIB_oDisplay;b.display=b.display!="none"?"none":a?a:""})},hasClass:function(a){var b=this[0];return l.inArray(a,b.className?b.className.split(" "):[])},removeClass:function(){var a=r.call(arguments);return this.each(function(b){l.each(a,function(c){b.className=l.remove(c,b.className?b.className.split(" "):[]).join(" ")})})},addClass:function(){var a=r.call(arguments);return this.each(function(b){l.each(a,function(c){var d=
b.className?b.className.split(" "):[];if(!l.inArray(c,d)){d[d.length]=c;b.className=d.join(" ")}})})},toggleClass:function(a){return this.each(function(b){var c=b.className?b.className.split(" "):[];if(l.inArray(a,c))l.remove(a,c);else c[c.length]=a;b.className=c.join(" ")})},setClass:function(a){return this.each(function(b){b.className=a})},offset:function(){var a=this[0],b={left:0,top:0,width:a.offsetWidth,height:a.offsetHeight},c=a.ownerDocument;if(a&&c)if(a.getBoundingClientRect){a=a.getBoundingClientRect();
var d=c.body;c=c.documentElement;b.left=a.left+p.scrollLeft()-(c.clientLeft||d.clientLeft||0);b.top=a.top+p.scrollTop()-(c.clientTop||d.clientTop||0)}else{if(a.offsetParent){do{b.left+=a.offsetLeft;b.top+=a.offsetTop;a=a.offsetParent}while(a)}}else b=null;return b},width:function(a){if(h.isValue(a)){if(h.isNumber(a)&&a<0)a=0;a=h.isString(a)?a:a+"px";return this.each(function(b){b.style.width=a})}return this[0].offsetWidth},height:function(a){if(h.isValue(a)){if(h.isNumber(a)&&a<0)a=0;a=h.isString(a)?
a:a+"px";return this.each(function(b){b.style.height=a})}return this[0].offsetHeight},clone:function(a){a=h.isValue(a)?a:true;var b=[];this.each(function(c){b.push(c.cloneNode(a))});return new k(b)},append:function(a){a=f(a);return this.each(function(b){a.each(function(c){b.appendChild(c)})})},appendTo:function(a){a=f(a)[0];return this.each(function(b){a.appendChild(b)})},prepend:function(a){a=f(a);return this.each(function(b){a.each(function(c){b.firstChild?b.insertBefore(c,b.firstChild):b.appendChild(c)})})},
prependTo:function(a){a=f(a)[0];return this.each(function(b){a.firstChild?a.insertBefore(b,a.firstChild):a.appendChild(b)})},insertBefore:function(a){a=f(a)[0];return this.each(function(b){a.parentNode.insertBefore(b,a)})},parent:function(){var a=[];this.each(function(b){l.indexOf(b.parentNode,a)==-1&&a.push(b.parentNode)});return new k(a)},first:function(){var a=[];this.each(function(b){(b=f(b).children(0)[0])&&a.push(b)});return new k(a)},next:function(){var a=[];this.each(function(b){do b=b.nextSibling;
while(b&&b.nodeType==3);b&&a.push(b)});return new k(a)},previous:function(){var a=[];this.each(function(b){do b=b.previousSibling;while(b&&b.nodeType==3);b&&a.push(b)});return new k(a)},last:function(){var a=[];this.each(function(b){for(var c=f(b).children(),d=-1;c[++d];)b=c[d];b&&a.push(b)});return new k(a)},html:function(a){return h.isValue(a)?this.each(function(b){b.innerHTML=a}):this[0].innerHTML},attr:function(a,b){a=a||{};var c={};if(h.isHash(a))c=a;else if(h.isValue(b))c[a]=b;else return this[0][a];
return this.each(function(d){q.each(c,function(g,e){d[g]=e})})},css:function(a,b){var c={};if(h.isHash(a))c=a;else if(h.isValue(b))c[a]=b;else return f(this[0]).currentStyle()[a];return this.each(function(d){q.each(c,function(g,e){if(g=="opacity"&&f.UA.ie)d.style.filter="alpha(opacity="+Math.ceil(e*100)+")";else{if(h.isNumber(e)&&g!="zIndex"&&g!="zoom"&&g!="opacity")e+="px";d.style[g]=e}})})},find:function(a){var b=[];this.each(function(c){f(a,c).each(function(d){b.push(d)})});return new k(b)},children:function(a){a=
!h.isValue(a)?false:h.isString(a)?a.toUpperCase():a;var b=[];this.each(function(c){c=c.childNodes;for(var d=[],g=c.length,e=0;e<g;e++)if(c[e].nodeType!=3)d[d.length]=c[e];if(a!==false){g=d.length;for(e=0;e<g;e++)if(e==a||d[e].nodeName==a)b.push(d[e])}else b.push.apply(b,d)});return new k(b)},on:function(a,b){return this.each(function(c){n(c,a,b)})},unbind:function(a,b){return this.each(function(c){o(c,a,b)})},unbindAll:function(a){return this.each(function(b){a?f.walkTheDOM(b,m.clear):m.clear(b)})},
remove:function(){return this.each(function(a){f.walkTheDOM(a,m.clear);a.parentNode&&a.parentNode.removeChild(a)})},detach:function(){return this.each(function(a){a.parentNode&&a.parentNode.removeChild(a)})},getDocument:function(){var a=[];this.each(function(b){if(b.nodeName=="IFRAME")if(b=b.contentDocument||b.contentWindow.document||b.document||null)a[a.length]=b});return f(a)},currentStyle:function(){var a=this[0];return f.win.getComputedStyle?f.win.getComputedStyle(a,null):a.currentStyle?a.currentStyle:
a.style},ready:s,link:function(){var a=[];this.each(function(b){a.push(b)});l.each(arguments,function(b){b instanceof k&&b.each(function(c){a.push(c)})});return new k(a)},blur:function(){return this.each(function(a){try{a.blur()}catch(b){f.error(b)}})},focus:function(){return this.each(function(a){try{a.focus()}catch(b){f.error(b)}})},value:function(a){return this.attr("value",a)},eq:function(a){return new k(this[a])}};k.is=h.is;f.add({NodeList:k,DOM:p,pxToFloat:function(a){return h.isNumber(parseFloat(a))?
parseFloat(a):h.isString(a)?parseFloat(a.substr(0,a.length-2)):a}});n(f.win,"unload",m.flush)});
jet().add("ua",function(d){d.UA=function(){var a=d.win.navigator,b=a.userAgent.toLowerCase();a=a.platform.toLowerCase();var e=/KHTML/.test(b)||/webkit/i.test(b),f=/opera/i.test(b),c=/(msie) ([\w.]+)/.exec(b);return{webkit:e,ie:c&&c[1]&&c[2]?parseFloat(c[2]):false,opera:f,gecko:!e&&!f&&!c&&/Gecko/i.test(b),win:a?/win/.test(a):/win/.test(b),mac:a?/mac/.test(a):/mac/.test(b)}}()});
