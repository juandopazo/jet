/**
 * @module paginator
 * @requires base
 * 
 * Copyright (c) 2011, Juan Ignacio Dopazo. All rights reserved.
 * Code licensed under the BSD License
 * https://github.com/juandopazo/jet/blob/master/LICENSE.md
*/
jet.add("paginator",function(c){c.Paginator=c.Base.create("paginator",c.Widget,[],{ATTRS:{recordSet:{required:true},recordsPerPage:{value:10},firstLast:{value:true},prevNext:{value:true},pagesShown:{value:5},firstText:{writeOnce:true,value:"<< first"},prevText:{writeOnce:true,value:"< prev"},nextText:{writeOnce:true,value:"next >"},lastText:{writeOnce:true,value:"last >>"},className:{writeOnce:true,value:"pg"},currentPage:{writeOnce:true,value:0},pageCount:{readOnly:true,value:0}}},{initializer:function(){var a=
this.get("recordSet");a.on("replace",this._recalculate,this);this.set("pageCount",Math.ceil(a.getRecords().length/this.get("recordsPerPage"))+1)},_recalculate:function(){},goTo:function(){return this},_onFirstClick:function(a){a.target.hasClass("active")&&this.goTo(0)},_onPrevClick:function(a){a.target.hasClass("active")&&this.goTo(this.get("currentPage")-1)},_onPageSelectorClick:function(a){this.goTo(parseInt(c(a.target).html(),10))},_onNextClick:function(a){a.target.hasClass("active")&&this.goTo(this.get("currentPage")+
1)},_onLastClick:function(a){a.target.hasClass("active")&&this.goTo(this.get("pageCount")-1)},_createButton:function(a,e,g,d){var b=this.get("id");a=c("<span/>").attr("id",this.getClassName(b,a)).addClass(this.getClassName(a),"inactive").html(g);a.on("click",e,this);a.appendTo(d);return a},renderUI:function(){var a,e,g=this.get("pageCount"),d=this.get("currentPage");this.get("id");var b,f=this.get("boundingBox"),h=c.bind(this.getClassName,this);this._createButton("first",this._onFirstClick,this.get("firstText"),
f);this._createButton("previous",this._onPrevClick,this.get("prevText"),f);a=c("<span/>").addClass(h("pages")).appendTo(f);for(b=d+1;b<d+g+1;b++){e=this._createButton("page",this._onPageSelectorClick,b,a);e.removeClass("inactive");e.addClass(b==d+1?h("current","page"):"",b==d+1?"active":"inactive")}this._createButton("next",this._onNextClick,this.get("nextText"),f);this._createButton("last",this._onLastClick,this.get("lastText"),f)}})});
