/**
 * @module paginator
 * @requires base
 * 
 * Copyright (c) 2011, Juan Ignacio Dopazo. All rights reserved.
 * Code licensed under the BSD License
 * https://github.com/juandopazo/jet/blob/master/LICENSE.md
*/
jet.add("paginator",function(b){var m=b.Lang;if(!jet.Paginator)jet.Paginator={};if(!m.isNumber(jet.Paginator.ids))jet.Paginator.ids=0;var l=function(){l.superclass.constructor.apply(this,arguments);var d=0,i=0,a=this.addAttrs({recordSet:{required:true},recordsPerPage:{value:10},firstLast:{value:true},prevNext:{value:true},pagesShown:{value:5},firstText:{writeOnce:true,value:"<< first"},prevText:{writeOnce:true,value:"< prev"},nextText:{writeOnce:true,value:"next >"},lastText:{writeOnce:true,value:"last >>"},
className:{writeOnce:true,value:"pg"},currentPage:{writeOnce:true,value:d},pageCount:{readOnly:true,value:i}});d=a.get("currentPage");var h=jet.Paginator.ids++,n=a.get("recordSet");i=Math.ceil(n.getRecords().length/a.get("recordsPerPage"))+1;a.get("recordSet").on("replace",function(){});var f=function(){return a},o=function(c){f(parseInt(b(c.target).html(),10))};a.goTo=f;a.on("render",function(){var c=a.get("classPrefix"),j=a.get("className"),k;c+=j;var g=a.get("boundingBox");b("<span/>").attr("id",
c+h+"-first").addClass(c+"-first","inactive").on("click",function(){b(this).hasClass("active")}).html(a.get("firstText")).appendTo(g);b("<span/>").attr("id",c+h+"-previous").addClass(c+"-previous","inactive").on("click",function(){b(this).hasClass("active")&&f(a.get("currentPage")-1)}).html(a.get("prevText")).appendTo(g);j=b("<span/>").addClass(c+"-pages").appendTo(g);for(var e=d+1;e<d+i+1;e++){k=b("<span/>").addClass(c+"-page",e==d+1?c+"-current-page":"",e==d+1?"active":"inactive");k.attr("id",c+
"-page"+e).html(e);k.on("click",o).appendTo(j)}b("<span/>").attr("id",c+h+"-next").addClass(c+"-next","inactive").on("click",function(){b(this).hasClass("active")&&f(a.get("currentPage")+1)}).html(a.get("nextText")).appendTo(g);b("<span/>").attr("id",c+h+"-last").addClass(c+"-last","inactive").on("click",function(){b(this).hasClass("active")&&f(a.get("pageCount")-1)}).html(a.get("lastText")).appendTo(g)})};b.Paginator=b.extend(l,b.Widget)});
