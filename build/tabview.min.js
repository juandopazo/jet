/**
 * @module tabview
 * @requires base,widget-parentchild
 * 
 * Copyright (c) 2012, Juan Ignacio Dopazo. All rights reserved.
 * Code licensed under the BSD License
 * https://github.com/juandopazo/jet/blob/master/LICENSE.md
*/
jet.add("tabview",function(b){var d=b.Base,e=b.Widget;b.Tab=d.create("tab",e,[b.WidgetChild],{ATTRS:{panelNode:{setter:b},triggerEvent:{value:"click"},label:{value:""},content:{value:""},href:{value:"#",writeOnce:true}},HTML_PARSER:{panel:function(){return this.get("parent").get("panelContainer").children(this.get("index"))},content:function(){var a=this.get("panelNode");if(a)return a.html()},label:function(){var a=this.get("contentBox");if(a)return a.html()}}},{BOUNDING_TEMPLATE:"<li/>",CONTENT_TEMPLATE:"<a/>",
PANEL_TEMPLATE:"<div/>",_uiTriggerEventChange:function(a){this.off(a.prevVal,this._selectHandler).on(a.newVal,this._selectHandler)},_uiTabLabelContentChange:function(a){var c=this.get("contentBox");c.children().remove();a.newVal instanceof b.NodeList?c.append(a.newVal):c.html(a.newVal)},_uiTabPanelContentChange:function(a){var c=this.get("panelNode");c.children().remove();a.newVal instanceof b.NodeList?c.append(a.newVal):c.html(a.newVal)},_uiTabSelectedChange:function(a){this.get("panelNode").toggleClass(this.getClassName("panel",
"selected"),a.newVal)},initializer:function(){this.get("panelNode")||this.set("panelNode",this.PANEL_TEMPLATE);var a=this.get("parent");a&&this.set("cssPrefix",a.get("cssPrefix"))},renderUI:function(){this.get("contentBox").attr("href",this.get("href")).html(this.get("label"));var a=this.get("panelNode").html(this.get("content")).addClass(this.getClassName("panel")),c=this.get("parent").get("panelContainer");a.parent().getDOMNode()!=c.getDOMNode()&&a.appendTo(c)},bindUI:function(){this.on(this.get("triggerEvent"),
this._selectHandler);this.after("triggerEventChange",this._uiTriggerEventChange);this.after("labelContentChange",this._uiTabLabelContentChange);this.after("panelContentChange",this._uiTabPanelContentChange);this.after("selectedChange",this._uiTabSelectedChange)},syncUI:function(){this.get("panelNode").toggleClass(this.getClassName("panel","selected"),this.get("selected"))},destructor:function(){this.get("panelNode").remove()},_selectHandler:function(a){a.domEvent.preventDefault();a.domEvent.stopPropagation();
this.select()}});b.TabView=d.create("tabview",e,[b.WidgetParent],{ATTRS:{panelContainer:{setter:b},defaultChildType:{value:b.Tab},multiple:{value:false,readOnly:true}},HTML_PARSER:{panelContainer:function(a){return b(a.children("div").getDOMNode())}}},{CONTENT_TEMPLATE:"<ul/>",CONTAINER_TEMPLATE:"<div/>",renderUI:function(){this.get("panelContainer").addClass(this.getClassName("panel","container")).appendTo(this.get("boundingBox"))},initializer:function(){this.get("panelContainer")||this.set("panelContainer",
this.CONTAINER_TEMPLATE)}})});
