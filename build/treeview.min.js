/**
 * @module treeview
 * @requires base,widget-parentchild
 * 
 * Copyright (c) 2011, Juan Ignacio Dopazo. All rights reserved.
 * Code licensed under the BSD License
 * https://github.com/juandopazo/jet/blob/master/LICENSE.md
*/
jet.add("treeview",function(b){var m=b.Lang,g=b.Base,h=b.Widget;b.TreeNode=g.create("treenode",h,[b.WidgetParent,b.WidgetChild],{ATTRS:{type:{value:"text"},title:{value:""},label:{value:""},controlNode:{setter:b},labelNode:{setter:b},defaultChildType:{value:"TreeNode"}},EVENTS:{labelChange:function(d,a){var c=this.get("labelNode");m.isString(a)?c.html(a):c.append(a)},titleChange:function(d,a){this.get("controlNode").attr("title",a)},selectedChange:function(d,a,c){this._expandedChange.call(this,a,
c)},click:function(d,a){a.target==this.get("labelNode")&&this.set("selected",!this.get("selected"))},render:function(){this._nodeToggle=b.bind(this.toggle,this);var d=this.get("boundingBox");this.get("contentBox");var a=this.get("labelNode").html(this.get("label")).addClass(this.getClassName("label")),c=this.get("controlNode").addClass(this.getClassName("control")),e=this.get("selected"),f=this.get("title");a.prependTo(d);c.prependTo(d);f&&c.attr("title",f);this.get("children").length>0&&a.addClass(this.getClassName("label",
"selectable"));a.link(c).on("click",this._nodeToggle);this._expandedChange(e,e)},destroy:function(){this.get("labelNode").unbind("click",this._nodeToggle);this.get("controlNode").unbind("click",this._nodeToggle)}},HTML_PARSER:{labelNode:function(){},controlNode:function(){}}},{LABEL_TEMPLATE:"<span/>",CONTROL_TEMPLATE:"<span/>",initializer:function(){this.set("labelNode",this.LABEL_TEMPLATE);this.set("controlNode",this.CONTROL_TEMPLATE)},_expandedChange:function(d,a){this.get("boundingBox");var c=
a?"collapse":"expand",e=this.get("controlNode"),f=this.get("contentBox"),i=this.getClassName("control","expanded"),j=this.getClassName("control","collapsed"),k=this.getClassName("content","expanded"),l=this.getClassName("content","collapsed");if(this.get("children").length>0&&this.fire(c)&&this.get("root").fire("node:"+c,this))if(d){e.addClass(i).removeClass(j);f.addClass(k).removeClass(l)}else{e.addClass(j).removeClass(i);f.addClass(l).removeClass(k)}}});b.TreeView=g.create("treeview",h,[b.WidgetParent],
{ATTRS:{defaultChildType:{value:"TreeNode"}}},{})});
