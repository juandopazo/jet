jet().add("treeview",function(e){var n=e.Array,k=function(){k.superclass.constructor.apply(this,arguments);var f=e("<span/>"),a=this.addAttrs({children:{value:[]},parent:{},type:{value:"text"},label:{required:true,setter:function(b){f.html(b);return b}},expanded:{value:true},treeview:{writeOnce:true,required:true},className:{value:this.get("treeview").get("className")+"-node"}}),h=a.get("treeview"),l=e("<div/>"),g=e("<div/>"),o=function(b,i,d){a.get("boundingBox");b=d?"collapse":"expand";var c=a.get("classPrefix")+
a.get("className");d=c+"-control-";c=c+"-content-";if(a.get("children").length>0)if(a.fire(b)&&h.fire("node:"+b,a))if(i){g.addClass(d+"expanded").removeClass(d+"collapsed");l.addClass(c+"expanded").removeClass(c+"collapsed")}else{g.addClass(d+"collapsed").removeClass(d+"expanded");l.addClass(c+"collapsed").removeClass(c+"expanded")}};this.on("expandedChange",o).on("render",function(){var b=a.get("classPrefix")+a.get("className"),i=a.get("boundingBox"),d=[b,"control-expanded-hover"].join("-"),c=[b,
"control-collapsed-hover"].join("-"),p=function(){if(a.get("children").length>0)a.get("expanded")?g.addClass(d).removeClass(c):g.addClass(c).removeClass(d)};g.addClass(b+"-control").appendTo(i);f.addClass(b+"-label").html(a.get("label")).appendTo(i);f.link(g).on("click",function(j){a.fire("click")||j.preventDefault();a.toggle();p()}).on("mouseover",p).on("mouseout",function(){g.removeClass(d).removeClass(c)});l.addClass(b+"-content").appendTo(i);n.each(a.get("children"),function(j){j.parent=a;j.treeview=
h;(new k(j)).render(l)});b=a.get("expanded");o(b,b)})};e.extend(k,e.Widget,{expand:function(){return this.set("expanded",true)},collapse:function(){return this.set("expanded",false)},toggle:function(){return this.set("expanded",!this.get("expanded"))}});var m=function(){m.superclass.constructor.apply(this,arguments);var f=this.addAttrs({branches:{required:true},className:{value:"treeview"}});this.on("render",function(){var a=f.get("boundingBox");n.each(f.get("branches"),function(h){h.treeview=f;(new k(h)).render(a)})})};
e.extend(m,e.Widget);e.add({TreeView:m})});
