/**
 * @module treeview
 * @requires base,widget-parentchild
 * 
 * Copyright (c) 2011, Juan Ignacio Dopazo. All rights reserved.
 * Code licensed under the BSD License
 * https://github.com/juandopazo/jet/blob/master/LICENSE.md
*/
jet.add("treeview",function(b){var e=b.Lang;b.TreeNode=b.Base.create("treenode",b.Widget,[b.WidgetParent,b.WidgetChild],{ATTRS:{type:{value:"text"},title:{value:""},label:{value:""},controlNode:{setter:b},labelNode:{setter:b},defaultChildType:{value:"TreeNode"}},HTML_PARSER:{labelNode:function(){},controlNode:function(){}}},{LABEL_TEMPLATE:"<span/>",CONTROL_TEMPLATE:"<span/>",_uiTNLabelChange:function(a){var c=this.get("labelNode");e.isString(a.newVal)?c.html(a.newVal):c.append(a.newVal)},_uiTNTitleChange:function(a){this.get("controlNode").attr("title",
a.newVal)},_uiTNClick:function(a){a.domEvent.target==this.get("labelNode")&&this.set("selected",!this.get("selected"))},initializer:function(){this.set("labelNode",this.LABEL_TEMPLATE);this.set("controlNode",this.CONTROL_TEMPLATE);this.after("labelChange",this._uiTNLabelChange);this.after("titleChange",this._uiTNTitleChange);this.after("selectedChange",this._uiTNSelectedChange)},renderUI:function(a){this.get("contentBox");var c=this.get("labelNode").html(this.get("label")).addClass(this.getClassName("label")),
d=this.get("controlNode").addClass("jet-treenode-control");c.prependTo(a);d.prependTo(a)},bindUI:function(){var a=b.bind(this.toggle,this);this._handlers.push(this.get("labelNode").on("click",a),this.get("controlNode").on("click",a));this.on("click",this._uiTNClick)},syncUI:function(){var a=this.get("title"),c=this.get("selected");a&&this.get("controlNode").attr("title",a);this.size()>0&&this.get("labelNode").addClass(this.getClassName("label","selectable"));this._uiTNSelectedChange({newVal:c,prevVal:c})},
_uiTNSelectedChange:function(a){var c=a.newVal;this.get("boundingBox");a=a.prevVal?"collapse":"expand";var d=this.get("controlNode"),f=this.get("contentBox"),g=this.getClassName("content","expanded"),h=this.getClassName("content","collapsed");if(this.size()>0&&this.fire(a)&&this.get("root").fire("node:"+a,this)){d.toggleClass("jet-treenode-control-expanded",c).toggleClass("jet-treenode-control-collapsed",!c);f.toggleClass(g,c).toggleClass(h,!c)}}});b.TreeView=b.Base.create("treeview",b.Widget,[b.WidgetParent],
{ATTRS:{defaultChildType:{value:"TreeNode"}}},{})});
