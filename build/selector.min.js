/**
 * @module selector
 * @requires 
 * 
 * Copyright (c) 2011, Juan Ignacio Dopazo. All rights reserved.
 * Code licensed under the BSD License
 * https://github.com/juandopazo/jet/blob/master/LICENSE.md
*/
jet.add("selector",function(B){(function(h,d){function j(a){v=[];n=0;for(K=a.length;n<K;n++)v[n]=a[n];return v}function r(a,b,c,i,s,f,o){var k,g;if(b&&this.tagName.toLowerCase()!==b)return false;if(c&&(k=c.match(W))&&k[1]!==this.id)return false;if(c&&(I=c.match(X)))for(n=I.length;n--;){a=I[n].slice(1);if(!(C.g(a)||C.s(a,new RegExp("(^|\\s+)"+a+"(\\s+|$)"))).test(this.className))return false}if(i&&!o){D=this.attributes;for(g in D)if(Object.prototype.hasOwnProperty.call(D,g)&&(D[g].name||g)==s)return this}if(i&&
!Y(f,this.getAttribute(s)||"",o))return false;return this}function w(a){return L.g(a)||L.s(a,a.replace(Z,"\\$1"))}function Y(a,b,c){switch(a){case "=":return b==c;case "^=":return b.match(l.g("^="+c)||l.s("^="+c,new RegExp("^"+w(c))));case "$=":return b.match(l.g("$="+c)||l.s("$="+c,new RegExp(w(c)+"$")));case "*=":return b.match(l.g(c)||l.s(c,new RegExp(w(c))));case "~=":return b.match(l.g("~="+c)||l.s("~="+c,new RegExp("(?:^|\\s+)"+w(c)+"(?:\\s+|$)")));case "|=":return b.match(l.g("|="+c)||l.s("|="+
c,new RegExp("^"+w(c)+"(-|$)")))}return false}function $(a,b,c){c=typeof b=="string"?c(b)[0]:b||d;if(a===window||a&&a.nodeType&&(a.nodeType==1||a.nodeType==9))return!b||a!==window&&c&&c.nodeType&&(c.nodeType==1||c.nodeType==9)&&M(a,c)?[a]:[];if(a&&typeof a==="object"&&isFinite(a.length))return j(a);if(e=a.match(N))return(E=d.getElementById(e[1]))?[E]:[];if(e=a.match(aa))return j(c.getElementsByTagName(e[1]));return false}function O(a){var b=[],c,i;c=0;a:for(;c<a.length;c++){for(i=0;i<b.length;i++)if(b[i]==
a[c])continue a;b[b.length]=a[c]}return b}function x(a,b){var c=typeof b=="string"?x(b)[0]:b||d;if(!c||!a)return[];if(e=$(a,b,x))return e;return ba(a,c)}var n,m,P,t,e,D,y,v,E,Q,K,R,I,S,q,W=/#([\w\-]+)/,X=/\.[\w\-]+/g,N=/^#([\w\-]+$)/,ca=/^\.([\w\-]+)$/,aa=/^([\w\-]+)$/,da=/^([\w]+)?\.([\w\-]+)$/,F=d.documentElement,ea=/\s(?![\s\w\-\/\?\&\=\:\.\(\)\!,@#%<>\{\}\$\*\^'"]*\])/,Z=/([.*+?\^=!:${}()|\[\]\/\\])/g,T=new RegExp(/^([a-z0-9]+)?(?:([\.\#]+[\w\-\.#]+)?)/.source+"("+/\[([\w\-]+)(?:([\|\^\$\*\~]?\=)['"]?([ \w\-\/\?\&\=\:\.\(\)\!,@#%<>\{\}\$\*\^]+)["']?)?\]/.source+
")?"),z=function(){this.c={}};z.prototype={g:function(a){return this.c[a]||undefined},s:function(a,b){return this.c[a]=b}};var C=new z,L=new z,l=new z,U=new z,M="compareDocumentPosition"in F?function(a,b){return(b.compareDocumentPosition(a)&16)==16}:"contains"in F?function(a,b){b=b==d||b==window?F:b;return b!==a&&b.contains(a)}:function(a,b){for(;a=a.parentNode;)if(a===b)return 1;return 0},ba=d.querySelector&&d.querySelectorAll?function(a,b){if(d.getElementsByClassName&&(e=a.match(ca)))return j(b.getElementsByClassName(e[1]));
return j(b.querySelectorAll(a))}:function(a,b){var c=[],i,s=[],f;if(e=a.match(da)){q=b.getElementsByTagName(e[1]||"*");v=C.g(e[2])||C.s(e[2],new RegExp("(^|\\s+)"+e[2]+"(\\s+|$)"));f=0;t=q.length;for(m=0;f<t;f++)v.test(q[f].className)&&(c[m++]=q[f]);return c}f=0;q=a.split(",");for(t=q.length;f<t;f++){var o=f,k;var g=q[f],p=[];k=[];var u=void 0,G=void 0;g=U.g(g)||U.s(g,g.split(ea));g=g.slice(0);if(g.length){var A=g;p=[];u=A.pop().match(T);G=u[1]||"*";var H=void 0,V=void 0,J=void 0;if(A=A.length&&(e=
A[0].match(N))?d.getElementById(e[1]):d){J=A.getElementsByTagName(G);H=0;for(V=J.length;H<V;H++){E=J[H];if(S=r.apply(E,u))p.push(S)}}p=p;if(g.length){m=0;G=p.length;for(P=0;m<G;m++){y=Q=p[m];for(u=g.length;u--;)b:for(;y!==F&&(y=y.parentNode);)if(R=r.apply(y,g[u].match(T)))break b;R&&(k[P++]=Q)}k=k}else k=p}else k=p;s[o]=k}f=0;for(t=s.length;f<t&&(i=s[f]);f++){o=i;if(b!==d){o=[];m=0;for(e=i.length;m<e&&(element=i[m]);m++)M(element,b)&&o.push(element)}c=c.concat(o)}return O(c)};x.uniq=O;var fa=h.qwery;
x.noConflict=function(){h.qwery=fa;return this};h.qwery=x})(this,document);var ga=B.qwery;delete B.qwery;B.find=function(h,d){d=d||B.context;var j,r=null;if(h.charAt(0)==="<"&&h.charAt(h.length-1)===">")if(h.match(/</g).length===1)return d.createElement(h.substr(1,h.length-(h.charAt(h.length-2)==="/"?3:2)));else{j=h.match(/<([a-z]+)>(.+)<\/([a-z]+)>/i);if(j.length==4&&j[1]==j[3]){r=d.createElement(j[1]);r.innerHTML=j[2]}return r}else return ga(h,d)}});
