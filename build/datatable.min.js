jet().add("datatable",function(c){var w=c.Lang,n=c.Array,p=function(){p.superclass.constructor.apply(this,arguments);var a=this.addAttrs({dataSource:{required:true},columnDefinitions:{required:true,validator:w.isArray},className:{writeOnce:true,value:"dt"}}),k=a.get("dataSource").get("recordSet"),j=a.get("classPrefix"),q=a.get("className"),b=j+q+"-",r=c("<table/>"),s=c("<thead/>").appendTo(r),l=c("<tbody/>").addClass(b+"data").appendTo(r),t=a.get("columnDefinitions");n.each(t,function(f,g){var d=
c("<th/>").append(c("<div/>").addClass(b+"liner").append(c("<span/>").addClass(b+"label").html(f.label||f.key)));d.attr("id",b+"0-th-"+f.key);if(g==0)d.addClass(b+"first");else g==t.length-1&&d.addClass(b+"last");f.sortable&&d.addClass(b+"sortable").on("click",function(m){m.stopPropagation();m.preventDefault();var h,i,e;m=d.attr("id").split("-").pop();if(d.hasClass(b+"desc")){h="asc";i="desc"}else{i="asc";h="desc"}s.find("th").removeClass(b+h,b+i);d.addClass(b+h).removeClass(b+i);k.sortBy(m,h);h=
k.getRecords();e=h.length;var u,v;i=b+(e%2==0?"even":"odd");var o=b+(e%2==0?"odd":"even");c("#"+j+"rec"+h[e-1].getId()).addClass(e%2==0?o:i).removeClass(e%2==0?i:o);for(e=e-2;e>=0;e--){u=c("#"+j+"rec"+h[e].getId());v=c("#"+j+"rec"+h[e+1].getId());u.addClass(e%2==0?i:o).removeClass(e%2==0?o:i).insertBefore(v)}l.find("."+b+"desc").removeClass(b+"desc");l.find("."+b+"col-"+m).addClass(b+"desc")});s.append(d)});a.addRow=function(f){f instanceof c.Record||(f=new c.Record(f));var g=c("<tr/>").attr("id",
j+"rec"+f.getId());n.each(a.get("columnDefinitions"),function(d){g.append(c("<td/>").addClass(j+q+"-col-"+d.key).append(c("<div/>").addClass(b+"liner").html(f.get(d.key))))});g.addClass(l.children()._nodes.length%2==0?b+"even":b+"odd").appendTo(l)};a.addRows=function(){};a.deleteRow=function(){};a.deleteRows=function(){};a.getColumn=function(){};a.getFirstTr=function(){};a.getNextTr=function(){};a.getFirstTd=function(){};a.getNextTd=function(){};a.getSelectedCell=function(){};a.getSelectedRow=function(){};
a.getSelectedColumn=function(){};a.selectCell=function(){};a.selectRow=function(){};a.selectColumn=function(){};a.unselectCell=function(){};a.unselectRow=function(){};a.unselectColumn=function(){};a.unselectAll=function(){};a.onDataReturnReplaceRows=function(f,g){l.children().remove();n.each(g.getRecords(),function(d){a.addRow(d)});k=g};a.onDataReturnAddRows=function(f,g){n.each(g.getRecords(),function(d){a.addRow(d)});k.push(g)};a.on("render",function(){a.onDataReturnAddRows(null,k);a.get("boundingBox").addClass(j+
q).append(r)})};c.extend(p,c.Widget);c.add({DataTable:p})});
